/**
 * Neuro-Design System CSS Foundation
 * Philosophy: "Neuro-Minimalism" — Japanese Zen (Negative Space) + Russian Constructivism (Strict Geometry)
 * Goal: Reduce cortisol, maximize dopamine feedback loops
 */

/* ========== Layer Cascade Control ========== */
@layer neuro-base, neuro-components, neuro-utilities;

/* ========== Design Tokens (CSS Custom Properties) ========== */
@layer neuro-base {
  :root {
    /* === SOFT PALETTE (No pure #000 or #FFF) === */
    --neuro-bg-deep: #0A0A0A;           /* Soft black (prevents OLED smearing) */
    --neuro-bg-surface: #121214;         /* Elevated surface */
    --neuro-bg-card: #1A1A1E;            /* Card backgrounds */
    --neuro-bg-elevated: #222226;        /* Highest elevation */
    
    --neuro-text-primary: #FCFCFC;       /* Soft white (not sterile) */
    --neuro-text-secondary: #A1A1AA;     /* Muted text */
    --neuro-text-tertiary: #71717A;      /* Disabled/placeholder */
    
    /* === DOPAMINE ANCHOR (Single Accent — OKLCH for perceptual uniformity) === */
    --neuro-accent: oklch(0.7 0.15 280); /* Vivid purple — THE dopamine color */
    --neuro-accent-muted: oklch(0.5 0.12 280);
    --neuro-accent-subtle: oklch(0.3 0.08 280);
    --neuro-accent-glow: oklch(0.7 0.15 280 / 0.4);
    
    /* === SEMANTIC COLORS === */
    --neuro-success: oklch(0.7 0.15 145);
    --neuro-warning: oklch(0.75 0.15 85);
    --neuro-error: oklch(0.65 0.2 25);
    
    /* === BORDERS & DIVIDERS === */
    --neuro-border: rgba(255, 255, 255, 0.08);
    --neuro-border-hover: rgba(255, 255, 255, 0.15);
    --neuro-border-active: var(--neuro-accent);
    
    /* === SPACING (8px grid, Gestalt grouping) === */
    --neuro-space-xs: 0.25rem;   /* 4px */
    --neuro-space-sm: 0.5rem;    /* 8px */
    --neuro-space-md: 1rem;      /* 16px — base unit */
    --neuro-space-lg: 1.5rem;    /* 24px */
    --neuro-space-xl: 2rem;      /* 32px */
    --neuro-space-2xl: 3rem;     /* 48px */
    --neuro-space-3xl: 4rem;     /* 64px — section gap (2x component gap) */
    
    /* === TYPOGRAPHY (Inter v4) === */
    --neuro-font-sans: 'Inter', system-ui, -apple-system, sans-serif;
    --neuro-font-georgian: 'Noto Sans Georgian', 'Inter', sans-serif;
    
    /* === RADII (Constructivist geometry) === */
    --neuro-radius-sm: 0.375rem;  /* 6px */
    --neuro-radius-md: 0.5rem;    /* 8px */
    --neuro-radius-lg: 0.75rem;   /* 12px */
    --neuro-radius-xl: 1rem;      /* 16px */
    --neuro-radius-2xl: 1.5rem;   /* 24px */
    
    /* === MOTION (Visceral feedback) === */
    --neuro-duration-instant: 100ms;
    --neuro-duration-fast: 150ms;
    --neuro-duration-normal: 200ms;
    --neuro-duration-slow: 300ms;
    --neuro-easing-out: cubic-bezier(0.33, 1, 0.68, 1);
    --neuro-easing-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    
    /* === GLASSMORPHISM (Only for sticky elements) === */
    --neuro-glass-bg: rgba(18, 18, 20, 0.8);
    --neuro-glass-blur: 12px;
  }
}

/* ========== Base Styles ========== */
@layer neuro-base {
  /* 2% Noise Texture Overlay (Tactile feel) */
  .neuro-noise::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.02;
    pointer-events: none;
    z-index: 1;
  }
  
  /* Typography: text-wrap balance for headers */
  .neuro-heading {
    font-family: var(--neuro-font-georgian);
    text-wrap: balance;
    letter-spacing: -0.02em;
    color: var(--neuro-text-primary);
  }
  
  /* Typography: tabular nums for data */
  .neuro-data {
    font-variant-numeric: tabular-nums;
    font-feature-settings: 'tnum' on;
  }
  
  /* Focus: Visible only on keyboard interaction */
  .neuro-focus:focus {
    outline: none;
  }
  
  .neuro-focus:focus-visible {
    outline: 2px solid var(--neuro-accent);
    outline-offset: 2px;
  }
}

/* ========== Component Styles ========== */
@layer neuro-components {
  /* Card with subtle elevation */
  .neuro-card {
    background: var(--neuro-bg-card);
    border: 1px solid var(--neuro-border);
    border-radius: var(--neuro-radius-xl);
    transition: 
      border-color var(--neuro-duration-normal) var(--neuro-easing-out),
      transform var(--neuro-duration-normal) var(--neuro-easing-out);
  }
  
  .neuro-card:hover {
    border-color: var(--neuro-border-hover);
  }
  
  /* Interactive element: scale 0.98 on active */
  .neuro-interactive {
    transition: transform var(--neuro-duration-normal) var(--neuro-easing-out);
  }
  
  .neuro-interactive:hover {
    transform: scale(1.01);
  }
  
  .neuro-interactive:active {
    transform: scale(0.98);
  }
  
  /* Button with dopamine accent */
  .neuro-button {
    background: var(--neuro-accent);
    color: var(--neuro-bg-deep);
    font-weight: 600;
    padding: var(--neuro-space-sm) var(--neuro-space-lg);
    border-radius: var(--neuro-radius-md);
    transition: 
      transform var(--neuro-duration-normal) var(--neuro-easing-out),
      box-shadow var(--neuro-duration-normal) var(--neuro-easing-out);
  }
  
  .neuro-button:hover {
    box-shadow: 0 0 20px var(--neuro-accent-glow);
  }
  
  .neuro-button:active {
    transform: scale(0.98);
  }
  
  /* Glass effect (only for sticky elements) */
  .neuro-glass {
    background: var(--neuro-glass-bg);
    backdrop-filter: blur(var(--neuro-glass-blur));
    -webkit-backdrop-filter: blur(var(--neuro-glass-blur));
    border: 1px solid var(--neuro-border);
  }
  
  /* Skeleton loader for zero CLS */
  .neuro-skeleton {
    background: linear-gradient(
      90deg,
      var(--neuro-bg-card) 0%,
      var(--neuro-bg-elevated) 50%,
      var(--neuro-bg-card) 100%
    );
    background-size: 200% 100%;
    animation: neuro-shimmer 1.5s ease-in-out infinite;
    border-radius: var(--neuro-radius-md);
  }
  
  @keyframes neuro-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}

/* ========== Utility Classes ========== */
@layer neuro-utilities {
  /* Gestalt: Section gap (2x component gap) */
  .neuro-section-gap {
    margin-top: var(--neuro-space-3xl);
  }
  
  /* Gestalt: Component gap */
  .neuro-component-gap {
    gap: var(--neuro-space-md);
  }
  
  /* Accent glow */
  .neuro-glow {
    box-shadow: 0 0 30px var(--neuro-accent-glow);
  }
  
  /* Subtle accent border */
  .neuro-accent-border {
    border-color: var(--neuro-accent-muted);
  }
  
  /* Container queries setup */
  .neuro-container {
    container-type: inline-size;
    container-name: neuro;
  }
  
  /* Progressive disclosure: hidden by default */
  .neuro-hidden {
    display: none;
  }
  
  .neuro-visible {
    display: block;
  }
  
  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .neuro-interactive,
    .neuro-card,
    .neuro-button,
    .neuro-skeleton {
      transition: none;
      animation: none;
    }
  }
}

/* ========== Container Query Breakpoints ========== */
@container neuro (min-width: 640px) {
  .neuro-grid-adaptive {
    grid-template-columns: repeat(2, 1fr);
  }
}

@container neuro (min-width: 768px) {
  .neuro-grid-adaptive {
    grid-template-columns: repeat(3, 1fr);
  }
}

@container neuro (min-width: 1024px) {
  .neuro-grid-adaptive {
    grid-template-columns: repeat(4, 1fr);
  }
}
