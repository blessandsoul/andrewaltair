(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},18620:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),a(57459),a(9457),a(55774),a(7629),a(11930),a(12523);var t=a(23191),r=a(88716),l=a(37922),i=a.n(l),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,57459)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9457)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,55774)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,7629)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,11930)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,12523)),"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],o=["C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\admin\\users\\page.tsx"],m="/admin/users/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},46167:(e,s,a)=>{Promise.resolve().then(a.bind(a,19505))},19505:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(10326),r=a(17577),l=a(29752),i=a(91664),n=a(41190),d=a(38443),c=a(69654),o=a(29280),m=a(72062);let x=[{id:"1",user:"Andrew Altair",action:"Updated",target:"პოსტი: ChatGPT Tips",timestamp:"5 წთ წინ",type:"update"},{id:"2",user:"Andrew Altair",action:"Created",target:"ვიდეო: AI Tutorial",timestamp:"1 სთ წინ",type:"create"},{id:"3",user:"Editor User",action:"Deleted",target:"კომენტარი #123",timestamp:"2 სთ წინ",type:"delete"},{id:"4",user:"Andrew Altair",action:"Login",target:"Admin Panel",timestamp:"3 სთ წინ",type:"login"},{id:"5",user:"Viewer User",action:"Logout",target:"Admin Panel",timestamp:"1 დღე წინ",type:"logout"}],u=[{id:"1",user:"Andrew Altair",ip:"192.168.1.1",device:"Desktop",browser:"TbBrandChrome 120",timestamp:"2024-12-25 14:30",status:"success"},{id:"2",user:"Andrew Altair",ip:"192.168.1.1",device:"Mobile",browser:"Safari",timestamp:"2024-12-24 10:15",status:"success"},{id:"3",user:"Unknown",ip:"45.67.89.12",device:"Desktop",browser:"Firefox",timestamp:"2024-12-23 22:45",status:"failed"}];function h(){let[e,s]=r.useState([]),[a,h]=r.useState(!0),[g,N]=r.useState("users"),[w,v]=r.useState(""),[y,b]=r.useState(!1),[k,C]=r.useState(!1),[z,P]=r.useState(!1),[A,S]=r.useState(null),U=()=>null;r.useEffect(()=>{(async function(){let e=U();if(!e){h(!1);return}try{let a=await fetch("/api/users?limit=100",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=((await a.json()).users||[]).map(e=>({id:e.id,name:e.fullName||e.username||"Unknown",email:e.email||"",role:e.role||"viewer",lastLogin:e.lastLogin||"არასდროს",status:e.status||"active",twoFA:e.twoFA||!1,registeredAt:e.createdAt?.split("T")[0]||"",sessions:e.sessions||0}));s(e)}}catch(e){console.error("Error fetching users:",e)}finally{h(!1)}})()},[]);let[B,T]=r.useState(new Set),[E,_]=r.useState("all"),[I,L]=r.useState("all"),[$,Q]=r.useState("name"),[D,R]=r.useState("asc"),[G,F]=r.useState(1),[O,V]=r.useState(10),M=e.filter(e=>{let s=e.name.toLowerCase().includes(w.toLowerCase())||e.email.toLowerCase().includes(w.toLowerCase()),a="all"===E||e.role===E,t="all"===I||e.status===I;return s&&a&&t}),q=[...M].sort((e,s)=>{let a=0;switch($){case"name":a=e.name.localeCompare(s.name);break;case"role":a=e.role.localeCompare(s.role);break;case"lastLogin":a=e.lastLogin.localeCompare(s.lastLogin);break;case"status":a=e.status.localeCompare(s.status)}return"asc"===D?a:-a}),Y=Math.ceil(q.length/O),H=q.slice((G-1)*O,G*O),Z=e=>{$===e?R("asc"===D?"desc":"asc"):(Q(e),R("asc"))},J=e=>{let s=new Set(B);s.has(e)?s.delete(e):s.add(e),T(s)},X=async()=>{if(confirm(`წაშალოთ ${B.size} მომხმარებელი?`)){let a=U();try{await Promise.all(Array.from(B).map(e=>fetch(`/api/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}))),s(e.filter(e=>!B.has(e.id))),T(new Set)}catch(e){console.error("Bulk delete error:",e),alert("შეცდომა წაშლისას")}}},W=async a=>{let t=U();try{await Promise.all(Array.from(B).map(e=>fetch(`/api/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({role:a})}))),s(e.map(e=>B.has(e.id)?{...e,role:a}:e)),T(new Set)}catch(e){console.error("Bulk change role error:",e)}},K=async()=>{let a=U();try{await Promise.all(Array.from(B).map(e=>fetch(`/api/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({status:"blocked"})}))),s(e.map(e=>B.has(e.id)?{...e,status:"blocked"}:e)),T(new Set)}catch(e){console.error("Bulk block error:",e)}},ee=async(a,t)=>{let r=U();try{(await fetch(`/api/users/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({role:t})})).ok&&s(e.map(e=>e.id===a?{...e,role:t}:e))}catch(e){console.error("Change role error:",e)}},es=async a=>{let t=U();try{let r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({username:a.email.split("@")[0],email:a.email,fullName:a.name,role:a.role,password:"temp123456"})});if(r.ok){let t=await r.json(),l={...a,id:t.user.id,lastLogin:"არასდროს",status:"active",twoFA:!1,registeredAt:new Date().toISOString().split("T")[0],sessions:0};s([...e,l]),b(!1)}else{let e=await r.json();alert(e.error||"შეცდომა დამატებისას")}}catch(e){console.error("Add user error:",e),alert("შეცდომა დამატებისას")}},ea=async a=>{let t=U();try{(await fetch(`/api/users/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({fullName:a.name,email:a.email,role:a.role})})).ok&&(s(e.map(e=>e.id===a.id?a:e)),C(!1),S(null))}catch(e){console.error("Update user error:",e)}},et=async a=>{if(confirm("წაშალოთ მომხმარებელი?")){let t=U();try{let r=await fetch(`/api/users/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(r.ok)s(e.filter(e=>e.id!==a));else{let e=await r.json();alert(e.error||"შეცდომა წაშლისას")}}catch(e){console.error("Delete user error:",e)}}},er=async a=>{let t=e.find(e=>e.id===a);if(!t)return;let r=U(),l="blocked"===t.status?"active":"blocked";try{(await fetch(`/api/users/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({status:l})})).ok&&s(e.map(e=>e.id===a?{...e,status:l}:e))}catch(e){console.error("Toggle block error:",e)}},el=a=>{s(e.map(e=>e.id===a?{...e,twoFA:!e.twoFA}:e))},ei=a=>{confirm("დაასრულოთ მომხმარებლის ყველა სესია?")&&(s(e.map(e=>e.id===a?{...e,sessions:0}:e)),alert("სესიები დასრულებულია"))},en=({field:e,children:s})=>t.jsx("th",{className:"text-left px-6 py-4 font-medium cursor-pointer hover:bg-muted/50 select-none",onClick:()=>Z(e),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[s,$===e&&("asc"===D?t.jsx(m.YeS,{className:"w-4 h-4"}):t.jsx(m.YRR,{className:"w-4 h-4"}))]})});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[t.jsx(m.HLl,{className:"w-8 h-8 text-indigo-500"}),"მომხმარებლები"]}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," მომხმარებელი"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",className:"gap-2",onClick:()=>{let e=new Blob([["სახელი,ელ.ფოსტა,როლი,სტატუსი,ბოლო შესვლა,2FA,რეგისტრაცია",...M.map(e=>[e.name,e.email,e.role,e.status,e.lastLogin,e.twoFA?"ჩართული":"გამორთული",e.registeredAt]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="users.csv",a.click()},children:[t.jsx(m.HXz,{className:"w-4 h-4"}),"ექსპორტი"]}),(0,t.jsxs)(i.z,{className:"gap-2",onClick:()=>b(!0),children:[t.jsx(m.xv7,{className:"w-4 h-4"}),"დამატება"]})]})]}),t.jsx("div",{className:"flex gap-2 border-b",children:[{id:"users",label:"მომხმარებლები",icon:m.HLl},{id:"activity",label:"აქტივობა",icon:m.aoj},{id:"logins",label:"შესვლების ისტორია",icon:m.rfE}].map(e=>(0,t.jsxs)("button",{onClick:()=>N(e.id),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${g===e.id?"border-indigo-500 text-indigo-500":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[t.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),"users"===g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(m.adB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),t.jsx(n.I,{placeholder:"ძიება...",value:w,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(o.Ph,{value:E,onValueChange:_,children:[t.jsx(o.i4,{className:"w-[140px]",children:t.jsx(o.ki,{placeholder:"როლი"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"ყველა როლი"}),t.jsx(o.Ql,{value:"admin",children:"ადმინი"}),t.jsx(o.Ql,{value:"editor",children:"ედიტორი"}),t.jsx(o.Ql,{value:"viewer",children:"მნახველი"})]})]}),(0,t.jsxs)(o.Ph,{value:I,onValueChange:L,children:[t.jsx(o.i4,{className:"w-[140px]",children:t.jsx(o.ki,{placeholder:"სტატუსი"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"ყველა"}),t.jsx(o.Ql,{value:"active",children:"აქტიური"}),t.jsx(o.Ql,{value:"inactive",children:"არააქტიური"}),t.jsx(o.Ql,{value:"blocked",children:"დაბლოკილი"})]})]})]}),B.size>0&&(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-indigo-500/10 rounded-lg border border-indigo-500/20",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:[B.size," არჩეული"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>W("editor"),children:"ედიტორი"}),t.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>W("viewer"),children:"მნახველი"}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:K,children:[t.jsx(m.s7E,{className:"w-4 h-4 mr-1"}),"დაბლოკვა"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"destructive",onClick:X,children:[t.jsx(m.EF5,{className:"w-4 h-4 mr-1"}),"წაშლა"]})]})]}),t.jsx(l.Zb,{children:t.jsx(l.aY,{className:"p-0",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-6 py-4 w-10",children:t.jsx(c.X,{checked:H.length>0&&B.size===H.length,onCheckedChange:()=>{B.size===H.length?T(new Set):T(new Set(H.map(e=>e.id)))}})}),t.jsx(en,{field:"name",children:"მომხმარებელი"}),t.jsx(en,{field:"role",children:"როლი"}),t.jsx(en,{field:"lastLogin",children:"ბოლო შესვლა"}),t.jsx(en,{field:"status",children:"სტატუსი"}),t.jsx("th",{className:"text-left px-6 py-4 font-medium",children:"2FA"}),t.jsx("th",{className:"text-right px-6 py-4 font-medium",children:"მოქმედება"})]})}),t.jsx("tbody",{className:"divide-y",children:H.map(e=>(0,t.jsxs)("tr",{className:`hover:bg-muted/30 ${"blocked"===e.status?"opacity-60":""}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx(c.X,{checked:B.has(e.id),onCheckedChange:()=>J(e.id)})}),t.jsx("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{S(e),P(!0)},children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.name[0]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium hover:text-indigo-500",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:(0,t.jsxs)(o.Ph,{value:e.role,onValueChange:s=>ee(e.id,s),children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"admin",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"ადმინი"]})}),t.jsx(o.Ql,{value:"editor",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"ედიტორი"]})}),t.jsx(o.Ql,{value:"viewer",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"მნახველი"]})})]})]})}),t.jsx("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:e.lastLogin}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(d.C,{variant:"active"===e.status?"default":"blocked"===e.status?"destructive":"secondary",children:"active"===e.status?"აქტიური":"blocked"===e.status?"დაბლოკილი":"არააქტიური"})}),t.jsx("td",{className:"px-6 py-4",children:e.twoFA?t.jsx(m.lVr,{className:"w-5 h-5 text-green-500"}):t.jsx(m.IfG,{className:"w-5 h-5 text-muted-foreground"})}),t.jsx("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex justify-end gap-1",children:[t.jsx(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{S(e),C(!0)},children:t.jsx(m.EMN,{className:"w-4 h-4"})}),t.jsx(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>er(e.id),children:"blocked"===e.status?t.jsx(m.tWO,{className:"w-4 h-4 text-green-500"}):t.jsx(m.s7E,{className:"w-4 h-4 text-orange-500"})}),t.jsx(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>et(e.id),children:t.jsx(m.EF5,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"გვერდზე:"}),(0,t.jsxs)(o.Ph,{value:O.toString(),onValueChange:e=>{V(Number(e)),F(1)},children:[t.jsx(o.i4,{className:"w-[70px]",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"10",children:"10"}),t.jsx(o.Ql,{value:"25",children:"25"}),t.jsx(o.Ql,{value:"50",children:"50"})]})]}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[(G-1)*O+1,"-",Math.min(G*O,q.length)," / ",q.length]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[t.jsx(i.z,{variant:"outline",size:"icon",onClick:()=>F(e=>Math.max(1,e-1)),disabled:1===G,children:t.jsx(m.BY8,{className:"w-4 h-4"})}),Array.from({length:Y},(e,s)=>s+1).slice(Math.max(0,G-3),Math.min(Y,G+2)).map(e=>t.jsx(i.z,{variant:G===e?"default":"outline",size:"icon",onClick:()=>F(e),children:e},e)),t.jsx(i.z,{variant:"outline",size:"icon",onClick:()=>F(e=>Math.min(Y,e+1)),disabled:G===Y,children:t.jsx(m.Ng7,{className:"w-4 h-4"})})]})]})]}),"activity"===g&&(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{className:"text-lg",children:"აქტივობის ჟურნალი"})}),t.jsx(l.aY,{className:"space-y-4",children:x.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-4 p-4 rounded-lg bg-muted/30",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${"create"===e.type?"bg-green-500/10 text-green-500":"update"===e.type?"bg-blue-500/10 text-blue-500":"delete"===e.type?"bg-red-500/10 text-red-500":"login"===e.type?"bg-indigo-500/10 text-indigo-500":"bg-gray-500/10 text-gray-500"}`,children:"login"===e.type?t.jsx(m.V5F,{className:"w-4 h-4"}):"logout"===e.type?t.jsx(m.VUx,{className:"w-4 h-4"}):t.jsx(m.aoj,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"font-medium",children:[t.jsx("span",{className:"text-indigo-500",children:e.user})," ",e.action," ",t.jsx("span",{className:"text-muted-foreground",children:e.target})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.timestamp})]})]},e.id))})]}),"logins"===g&&t.jsx(l.Zb,{children:t.jsx(l.aY,{className:"p-0",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 font-medium",children:"მომხმარებელი"}),t.jsx("th",{className:"text-left px-6 py-4 font-medium",children:"IP"}),t.jsx("th",{className:"text-left px-6 py-4 font-medium",children:"მოწყობილობა"}),t.jsx("th",{className:"text-left px-6 py-4 font-medium",children:"თარიღი"}),t.jsx("th",{className:"text-right px-6 py-4 font-medium",children:"სტატუსი"})]})}),t.jsx("tbody",{className:"divide-y",children:u.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30",children:[t.jsx("td",{className:"px-6 py-4 font-medium",children:e.user}),t.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:e.ip}),t.jsx("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Desktop"===e.device?t.jsx(m.y1G,{className:"w-4 h-4 text-muted-foreground"}):t.jsx(m.QBi,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:e.browser})]})}),t.jsx("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:e.timestamp}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex justify-end",children:t.jsx(d.C,{variant:"success"===e.status?"default":"destructive",children:"success"===e.status?"წარმატებული":"წარუმატებელი"})})})]},e.id))})]})})}),y&&t.jsx(p,{onClose:()=>b(!1),onAdd:es}),k&&A&&t.jsx(f,{user:A,onClose:()=>{C(!1),S(null)},onSave:ea}),z&&A&&t.jsx(j,{user:A,onClose:()=>{P(!1),S(null)},onToggle2FA:()=>el(A.id),onForceLogout:()=>ei(A.id)})]})}function p({onClose:e,onAdd:s}){let[a,d]=r.useState({name:"",email:"",password:"",confirmPassword:"",role:"viewer"}),[c,x]=r.useState(!1),[u,h]=r.useState({}),p=()=>{let e={};return a.name.trim()||(e.name="სახელი სავალდებულოა"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(e.email="არასწორი ფორმატი"):e.email="ელ.ფოსტა სავალდებულოა",a.password?a.password.length<6&&(e.password="მინიმუმ 6 სიმბოლო"):e.password="პაროლი სავალდებულოა",a.password!==a.confirmPassword&&(e.confirmPassword="პაროლები არ ემთხვევა"),h(e),0===Object.keys(e).length};return t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:e,children:(0,t.jsxs)(l.Zb,{className:"w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[t.jsx(m.xv7,{className:"w-5 h-5 text-indigo-500"}),"ახალი მომხმარებელი"]}),t.jsx(i.z,{variant:"ghost",size:"icon",onClick:e,children:t.jsx(m.lhV,{className:"w-4 h-4"})})]}),t.jsx(l.aY,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()&&s({name:a.name,email:a.email,role:a.role})},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(m.S8z,{className:"w-4 h-4 text-muted-foreground"}),"სახელი"]}),t.jsx(n.I,{placeholder:"სრული სახელი",value:a.name,onChange:e=>d({...a,name:e.target.value})}),u.name&&t.jsx("p",{className:"text-sm text-destructive",children:u.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(m.QOK,{className:"w-4 h-4 text-muted-foreground"}),"ელ.ფოსტა"]}),t.jsx(n.I,{type:"email",placeholder:"email@example.com",value:a.email,onChange:e=>d({...a,email:e.target.value})}),u.email&&t.jsx("p",{className:"text-sm text-destructive",children:u.email})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(m.A2B,{className:"w-4 h-4 text-muted-foreground"}),"პაროლი"]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(n.I,{type:c?"text":"password",placeholder:"მინიმუმ 6 სიმბოლო",value:a.password,onChange:e=>d({...a,password:e.target.value})}),t.jsx("button",{type:"button",onClick:()=>x(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?t.jsx(m.wQf,{className:"w-4 h-4"}):t.jsx(m.f7Q,{className:"w-4 h-4"})})]}),u.password&&t.jsx("p",{className:"text-sm text-destructive",children:u.password})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(m.A2B,{className:"w-4 h-4 text-muted-foreground"}),"პაროლის დადასტურება"]}),t.jsx(n.I,{type:c?"text":"password",placeholder:"გაიმეორეთ პაროლი",value:a.confirmPassword,onChange:e=>d({...a,confirmPassword:e.target.value})}),u.confirmPassword&&t.jsx("p",{className:"text-sm text-destructive",children:u.confirmPassword})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(m.$T2,{className:"w-4 h-4 text-muted-foreground"}),"როლი"]}),(0,t.jsxs)(o.Ph,{value:a.role,onValueChange:e=>d({...a,role:e}),children:[t.jsx(o.i4,{children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"admin",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"ადმინი"]})}),t.jsx(o.Ql,{value:"editor",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"ედიტორი"]})}),t.jsx(o.Ql,{value:"viewer",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"მნახველი"]})})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(i.z,{type:"button",variant:"outline",onClick:e,children:"გაუქმება"}),(0,t.jsxs)(i.z,{type:"submit",className:"gap-2",children:[t.jsx(m.e6w,{className:"w-4 h-4"}),"რეგისტრაცია"]})]})]})})]})})}function f({user:e,onClose:s,onSave:a}){let[d,c]=r.useState({name:e.name,email:e.email,role:e.role});return t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:(0,t.jsxs)(l.Zb,{className:"w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[t.jsx(m.EMN,{className:"w-5 h-5 text-indigo-500"}),"რედაქტირება"]}),t.jsx(i.z,{variant:"ghost",size:"icon",onClick:s,children:t.jsx(m.lhV,{className:"w-4 h-4"})})]}),t.jsx(l.aY,{children:(0,t.jsxs)("form",{onSubmit:s=>{s.preventDefault(),a({...e,...d})},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"სახელი"}),t.jsx(n.I,{value:d.name,onChange:e=>c({...d,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"ელ.ფოსტა"}),t.jsx(n.I,{type:"email",value:d.email,onChange:e=>c({...d,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"როლი"}),(0,t.jsxs)(o.Ph,{value:d.role,onValueChange:e=>c({...d,role:e}),children:[t.jsx(o.i4,{children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"admin",children:"ადმინი"}),t.jsx(o.Ql,{value:"editor",children:"ედიტორი"}),t.jsx(o.Ql,{value:"viewer",children:"მნახველი"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(i.z,{type:"button",variant:"outline",onClick:s,children:"გაუქმება"}),(0,t.jsxs)(i.z,{type:"submit",className:"gap-2",children:[t.jsx(m.e6w,{className:"w-4 h-4"}),"შენახვა"]})]})]})})]})})}function j({user:e,onClose:s,onToggle2FA:a,onForceLogout:r}){return t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:(0,t.jsxs)(l.Zb,{className:"w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[t.jsx(l.ll,{children:"პროფილი"}),t.jsx(i.z,{variant:"ghost",size:"icon",onClick:s,children:t.jsx(m.lhV,{className:"w-4 h-4"})})]}),(0,t.jsxs)(l.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:e.name[0]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-bold",children:e.name}),t.jsx("p",{className:"text-muted-foreground",children:e.email}),t.jsx(d.C,{className:"mt-1",children:e.role})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"რეგისტრაცია"}),t.jsx("p",{className:"font-medium",children:e.registeredAt})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"ბოლო შესვლა"}),t.jsx("p",{className:"font-medium",children:e.lastLogin})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"აქტიური სესიები"}),t.jsx("p",{className:"font-medium",children:e.sessions})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"სტატუსი"}),t.jsx(d.C,{variant:"active"===e.status?"default":"blocked"===e.status?"destructive":"secondary",children:"active"===e.status?"აქტიური":"blocked"===e.status?"დაბლოკილი":"არააქტიური"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.twoFA?t.jsx(m.lVr,{className:"w-5 h-5 text-green-500"}):t.jsx(m.IfG,{className:"w-5 h-5 text-muted-foreground"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"ორფაქტორიანი ავთენტიფიკაცია"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.twoFA?"ჩართულია":"გამორთულია"})]})]}),t.jsx(i.z,{variant:"outline",size:"sm",onClick:a,children:e.twoFA?"გამორთვა":"ჩართვა"})]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full gap-2",onClick:r,disabled:0===e.sessions,children:[t.jsx(m.mm_,{className:"w-4 h-4"}),"ყველა სესიის დასრულება (",e.sessions,")"]})]})]})]})})}},69654:(e,s,a)=>{"use strict";a.d(s,{X:()=>U});var t=a(10326),r=a(17577),l=a(48051),i=a(93095),n=a(82561),d=a(52067),c=a(53405),o=a(2566),m=a(9815),x=a(77335),u="Checkbox",[h,p]=(0,i.b)(u),[f,j]=h(u);function g(e){let{__scopeCheckbox:s,checked:a,children:l,defaultChecked:i,disabled:n,form:c,name:o,onCheckedChange:m,required:x,value:h="on",internal_do_not_use_render:p}=e,[j,g]=(0,d.T)({prop:a,defaultProp:i??!1,onChange:m,caller:u}),[N,w]=r.useState(null),[v,y]=r.useState(null),b=r.useRef(!1),k=!N||!!c||!!N.closest("form"),C={checked:j,disabled:n,setChecked:g,control:N,setControl:w,name:o,form:c,value:h,hasConsumerStoppedPropagationRef:b,required:x,defaultChecked:!z(i)&&i,isFormControl:k,bubbleInput:v,setBubbleInput:y};return(0,t.jsx)(f,{scope:s,...C,children:"function"==typeof p?p(C):l})}var N="CheckboxTrigger",w=r.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:a,...i},d)=>{let{control:c,value:o,disabled:m,checked:u,required:h,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:w,bubbleInput:v}=j(N,e),y=(0,l.e)(d,p),b=r.useRef(u);return r.useEffect(()=>{let e=c?.form;if(e){let s=()=>f(b.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[c,f]),(0,t.jsx)(x.WV.button,{type:"button",role:"checkbox","aria-checked":z(u)?"mixed":u,"aria-required":h,"data-state":P(u),"data-disabled":m?"":void 0,disabled:m,value:o,...i,ref:y,onKeyDown:(0,n.Mj)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.Mj)(a,e=>{f(e=>!!z(e)||!e),v&&w&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});w.displayName=N;var v=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:r,checked:l,defaultChecked:i,required:n,disabled:d,value:c,onCheckedChange:o,form:m,...x}=e;return(0,t.jsx)(g,{__scopeCheckbox:a,checked:l,defaultChecked:i,disabled:d,required:n,onCheckedChange:o,name:r,form:m,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{...x,ref:s,__scopeCheckbox:a}),e&&(0,t.jsx)(C,{__scopeCheckbox:a})]})})});v.displayName=u;var y="CheckboxIndicator",b=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:r,...l}=e,i=j(y,a);return(0,t.jsx)(m.z,{present:r||z(i.checked)||!0===i.checked,children:(0,t.jsx)(x.WV.span,{"data-state":P(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...e.style}})})});b.displayName=y;var k="CheckboxBubbleInput",C=r.forwardRef(({__scopeCheckbox:e,...s},a)=>{let{control:i,hasConsumerStoppedPropagationRef:n,checked:d,defaultChecked:m,required:u,disabled:h,name:p,value:f,form:g,bubbleInput:N,setBubbleInput:w}=j(k,e),v=(0,l.e)(a,w),y=(0,c.D)(d),b=(0,o.t)(i);r.useEffect(()=>{if(!N)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,s=!n.current;if(y!==d&&e){let a=new Event("click",{bubbles:s});N.indeterminate=z(d),e.call(N,!z(d)&&d),N.dispatchEvent(a)}},[N,y,d,n]);let C=r.useRef(!z(d)&&d);return(0,t.jsx)(x.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??C.current,required:u,disabled:h,name:p,value:f,form:g,...s,tabIndex:-1,ref:v,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function z(e){return"indeterminate"===e}function P(e){return z(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k;var A=a(72062),S=a(51223);function U({className:e,...s}){return t.jsx(v,{"data-slot":"checkbox",className:(0,S.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(b,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:t.jsx(A.e6w,{className:"size-3.5"})})})}},29280:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>h,DI:()=>c,Ph:()=>d,Ql:()=>f,i4:()=>m,ki:()=>o,n5:()=>p});var t=a(10326),r=a(17577),l=a(75334),i=a(72062),n=a(51223);let d=l.fC,c=l.ZA,o=l.B4,m=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.xz,{ref:r,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(l.JO,{asChild:!0,children:t.jsx(i.YRR,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let x=r.forwardRef(({className:e,...s},a)=>t.jsx(l.u_,{ref:a,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.YeS,{className:"h-4 w-4"})}));x.displayName=l.u_.displayName;let u=r.forwardRef(({className:e,...s},a)=>t.jsx(l.$G,{ref:a,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.YRR,{className:"h-4 w-4"})}));u.displayName=l.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:a="popper",...r},i)=>t.jsx(l.h_,{children:(0,t.jsxs)(l.VY,{ref:i,className:(0,n.cn)("relative z-[99999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[t.jsx(x,{}),t.jsx(l.l_,{className:(0,n.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(u,{})]})}));h.displayName=l.VY.displayName;let p=r.forwardRef(({className:e,...s},a)=>t.jsx(l.__,{ref:a,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));p.displayName=l.__.displayName;let f=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(i.e6w,{className:"h-4 w-4"})})}),t.jsx(l.eT,{children:s})]}));f.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},57459:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=a(68570);let r=(0,t.createProxy)(String.raw`C:\Users\User\Desktop\GITHUB\andrewaltair\fresh\src\app\admin\users\page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,t.createProxy)(String.raw`C:\Users\User\Desktop\GITHUB\andrewaltair\fresh\src\app\admin\users\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[8948,6051,5334,9287,8628],()=>a(18620));module.exports=t})();