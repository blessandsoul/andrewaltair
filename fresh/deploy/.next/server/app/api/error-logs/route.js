"use strict";(()=>{var e={};e.id=4880,e.ids=[4880],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50519:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>y,patchFetch:()=>R,requestAsyncStorage:()=>v,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>w});var t={};o.r(t),o.d(t,{DELETE:()=>f,GET:()=>g,POST:()=>m});var n=o(49303),s=o(88716),a=o(60670),i=o(87070),l=o(75748),u=o(11185),c=o.n(u);let p=new u.Schema({level:{type:String,enum:["error","warning","info"],default:"info"},message:{type:String,required:[!0,"Message is required"]},source:{type:String,default:"system"}},{timestamps:!0}),d=c().models.ErrorLog||c().model("ErrorLog",p);async function g(e){try{await (0,l.Z)();let{searchParams:r}=new URL(e.url),o=r.get("level"),t={};o&&"all"!==o&&(t.level=o);let n=(await d.find(t).sort({createdAt:-1}).limit(100).lean()).map(e=>({...e,id:e._id.toString(),time:e.createdAt,_id:void 0}));return i.NextResponse.json({logs:n})}catch(e){return console.error("Get error logs error:",e),i.NextResponse.json({error:"Failed to fetch error logs"},{status:500})}}async function m(e){try{await (0,l.Z)();let r=await e.json(),o=new d(r);return await o.save(),i.NextResponse.json({success:!0,log:{...o.toObject(),id:o._id.toString()}})}catch(e){return console.error("Create error log error:",e),i.NextResponse.json({error:"Failed to create error log"},{status:500})}}async function f(){try{return await (0,l.Z)(),await d.deleteMany({}),i.NextResponse.json({success:!0,message:"All logs cleared"})}catch(e){return console.error("Clear logs error:",e),i.NextResponse.json({error:"Failed to clear logs"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/error-logs/route",pathname:"/api/error-logs",filename:"route",bundlePath:"app/api/error-logs/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\error-logs\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:v,staticGenerationAsyncStorage:w,serverHooks:x}=h,y="/api/error-logs/route";function R(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:w})}},75748:(e,r,o)=>{o.d(r,{Z:()=>i});var t=o(11185),n=o.n(t);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=a);let i=async function(){if(a.conn)return a.conn;a.promise||(a.promise=n().connect(s,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}}};var r=require("../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>o(50519));module.exports=t})();