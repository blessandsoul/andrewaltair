"use strict";(()=>{var e={};e.id=3639,e.ids=[3639,1377],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48114:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>S,patchFetch:()=>N,requestAsyncStorage:()=>b,routeModule:()=>g,serverHooks:()=>v,staticGenerationAsyncStorage:()=>x});var n={};r.r(n),r.d(n,{DELETE:()=>y,GET:()=>c,POST:()=>f,PUT:()=>m});var o=r(49303),i=r(88716),a=r(60670),s=r(87070),d=r(75748),u=r(61377),p=r(11185),l=r.n(p);async function c(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!l().Types.ObjectId.isValid(e))return s.NextResponse.json({error:"Invalid bot ID"},{status:400});let r=await u.default.findById(e).lean();if(!r)return s.NextResponse.json({error:"Bot not found"},{status:404});await u.default.findByIdAndUpdate(e,{$inc:{downloads:1}});let n="private"===r.tier?null:r.masterPrompt;return s.NextResponse.json({id:r._id.toString(),name:r.name,codename:r.codename,version:r.version,description:r.description,shortDescription:r.shortDescription,category:r.category,tier:r.tier,price:r.price,icon:r.icon,color:r.color,features:r.features,masterPrompt:n,rating:r.rating,downloads:r.downloads,likes:r.likes,isRecentlyAdded:r.isRecentlyAdded,isFeatured:r.isFeatured})}catch(e){return console.error("Get bot error:",e),s.NextResponse.json({error:"Failed to fetch bot"},{status:500})}}async function m(e,{params:t}){try{await (0,d.Z)();let{id:r}=await t,n=await e.json();if(!l().Types.ObjectId.isValid(r))return s.NextResponse.json({error:"Invalid bot ID"},{status:400});let o=await u.default.findByIdAndUpdate(r,{name:n.name,codename:n.codename,version:n.version,description:n.description,shortDescription:n.shortDescription,category:n.category,tier:n.tier,price:n.price,icon:n.icon,color:n.color,features:n.features,masterPrompt:n.masterPrompt,isRecentlyAdded:n.isRecentlyAdded,isFeatured:n.isFeatured,isActive:n.isActive},{new:!0,runValidators:!0});if(!o)return s.NextResponse.json({error:"Bot not found"},{status:404});return s.NextResponse.json({id:o._id.toString(),name:o.name,message:"Bot updated successfully"})}catch(e){return console.error("Update bot error:",e),s.NextResponse.json({error:"Failed to update bot"},{status:500})}}async function y(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!l().Types.ObjectId.isValid(e))return s.NextResponse.json({error:"Invalid bot ID"},{status:400});let r=await u.default.findByIdAndDelete(e);if(!r)return s.NextResponse.json({error:"Bot not found"},{status:404});return s.NextResponse.json({message:"Bot deleted successfully",id:r._id.toString()})}catch(e){return console.error("Delete bot error:",e),s.NextResponse.json({error:"Failed to delete bot"},{status:500})}}async function f(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!l().Types.ObjectId.isValid(e))return s.NextResponse.json({error:"Invalid bot ID"},{status:400});let r=await u.default.findByIdAndUpdate(e,{$inc:{likes:1}},{new:!0});if(!r)return s.NextResponse.json({error:"Bot not found"},{status:404});return s.NextResponse.json({id:r._id.toString(),likes:r.likes})}catch(e){return console.error("Like bot error:",e),s.NextResponse.json({error:"Failed to like bot"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/bots/[id]/route",pathname:"/api/bots/[id]",filename:"route",bundlePath:"app/api/bots/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\bots\\[id]\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:b,staticGenerationAsyncStorage:x,serverHooks:v}=g,S="/api/bots/[id]/route";function N(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:x})}},75748:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(11185),o=r.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=a);let s=async function(){if(a.conn)return a.conn;a.promise||(a.promise=o().connect(i,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}},61377:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var n=r(11185),o=r.n(n);let i=new n.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,unique:!0},codename:{type:String,required:[!0,"Codename is required"],trim:!0},version:{type:String,required:!0,default:"V1.0"},description:{type:String,required:[!0,"Description is required"],trim:!0},shortDescription:{type:String,required:[!0,"Short description is required"],trim:!0,maxlength:150},category:{type:String,enum:["content","mystic","business","creative","translation"],required:!0,index:!0},tier:{type:String,enum:["free","premium","private"],default:"free",index:!0},price:{type:Number,min:0},icon:{type:String,default:"Bot"},color:{type:String,default:"from-violet-500 to-purple-600"},features:[{type:String,trim:!0}],masterPrompt:{type:String,required:[!0,"Master prompt is required"]},rating:{type:Number,default:4.5,min:0,max:5},downloads:{type:Number,default:0},likes:{type:Number,default:0},isRecentlyAdded:{type:Boolean,default:!0},isFeatured:{type:Boolean,default:!1,index:!0},isActive:{type:Boolean,default:!0,index:!0},creator:{name:{type:String},avatar:{type:String},bio:{type:String},verified:{type:Boolean,default:!1},totalSales:{type:Number,default:0},rating:{type:Number,default:5,min:0,max:5},responseTime:{type:String}},guarantees:{moneyBack:{type:Number,default:30},freeUpdates:{type:Boolean,default:!0},support:{type:{type:String,default:"24/7 ჩატი"},responseTime:{type:String,default:"< 2 საათი"},languages:[{type:String}]},warranty:{type:String}},stats:{avgRating:{type:Number,default:4.5,min:0,max:5},totalReviews:{type:Number,default:0},successRate:{type:Number,default:95,min:0,max:100},completionRate:{type:Number,default:90,min:0,max:100},repeatPurchase:{type:Number,default:60,min:0,max:100}},updates:{lastUpdated:{type:String},changelog:[{version:{type:String},date:{type:String},changes:[{type:String}]}],roadmap:[{type:String}]}},{timestamps:!0,suppressReservedKeysWarning:!0});i.index({name:"text",description:"text",codename:"text"});let a=o().models.Bot||o().model("Bot",i)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,5972],()=>r(48114));module.exports=n})();