"use strict";(()=>{var e={};e.id=1176,e.ids=[1176,1377],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12986:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var i={};r.r(i),r.d(i,{GET:()=>u,POST:()=>l});var a=r(49303),n=r(88716),o=r(60670),s=r(87070),p=r(75748),d=r(61377);async function u(e){try{await (0,p.Z)();let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),i=parseInt(t.get("limit")||"50"),a=t.get("category"),n=t.get("tier"),o=t.get("search"),u=t.get("featured"),l={isActive:!0};a&&"all"!==a&&(l.category=a),n&&"all"!==n&&(l.tier=n),"true"===u&&(l.isFeatured=!0),o&&(l.$or=[{name:{$regex:o,$options:"i"}},{description:{$regex:o,$options:"i"}},{codename:{$regex:o,$options:"i"}}]);let c=await d.default.countDocuments(l),m=(await d.default.find(l).select("-masterPrompt").sort({isFeatured:-1,isNew:-1,rating:-1,name:1}).skip((r-1)*i).limit(i).lean()).map(e=>({id:e._id.toString(),name:e.name,codename:e.codename,version:e.version,description:e.description,shortDescription:e.shortDescription,category:e.category,tier:e.tier,price:e.price,icon:e.icon,color:e.color,features:e.features,rating:e.rating,downloads:e.downloads,likes:e.likes,isRecentlyAdded:e.isRecentlyAdded,isFeatured:e.isFeatured})),g=await d.default.distinct("category");return s.NextResponse.json({bots:m,categories:g,pagination:{total:c,page:r,limit:i,totalPages:Math.ceil(c/i)}})}catch(e){return console.error("Get bots error:",e),s.NextResponse.json({error:"Failed to fetch bots"},{status:500})}}async function l(e){try{await (0,p.Z)();let t=await e.json(),r=await d.default.create({name:t.name,codename:t.codename,version:t.version||"V1.0",description:t.description,shortDescription:t.shortDescription,category:t.category,tier:t.tier||"free",price:t.price,icon:t.icon||"Bot",color:t.color||"from-violet-500 to-purple-600",features:t.features||[],masterPrompt:t.masterPrompt,rating:t.rating||4.5,isRecentlyAdded:t.isRecentlyAdded??!0,isFeatured:t.isFeatured||!1});return s.NextResponse.json({id:r._id.toString(),name:r.name,codename:r.codename,version:r.version,category:r.category,tier:r.tier},{status:201})}catch(e){return console.error("Create bot error:",e),s.NextResponse.json({error:"Failed to create bot"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/bots/route",pathname:"/api/bots",filename:"route",bundlePath:"app/api/bots/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\bots\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:y}=c,f="/api/bots/route";function v(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},75748:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(11185),a=r.n(i);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let s=async function(){if(o.conn)return o.conn;o.promise||(o.promise=a().connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},61377:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var i=r(11185),a=r.n(i);let n=new i.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,unique:!0},codename:{type:String,required:[!0,"Codename is required"],trim:!0},version:{type:String,required:!0,default:"V1.0"},description:{type:String,required:[!0,"Description is required"],trim:!0},shortDescription:{type:String,required:[!0,"Short description is required"],trim:!0,maxlength:150},category:{type:String,enum:["content","mystic","business","creative","translation"],required:!0,index:!0},tier:{type:String,enum:["free","premium","private"],default:"free",index:!0},price:{type:Number,min:0},icon:{type:String,default:"Bot"},color:{type:String,default:"from-violet-500 to-purple-600"},features:[{type:String,trim:!0}],masterPrompt:{type:String,required:[!0,"Master prompt is required"]},rating:{type:Number,default:4.5,min:0,max:5},downloads:{type:Number,default:0},likes:{type:Number,default:0},isRecentlyAdded:{type:Boolean,default:!0},isFeatured:{type:Boolean,default:!1,index:!0},isActive:{type:Boolean,default:!0,index:!0},creator:{name:{type:String},avatar:{type:String},bio:{type:String},verified:{type:Boolean,default:!1},totalSales:{type:Number,default:0},rating:{type:Number,default:5,min:0,max:5},responseTime:{type:String}},guarantees:{moneyBack:{type:Number,default:30},freeUpdates:{type:Boolean,default:!0},support:{type:{type:String,default:"24/7 ჩატი"},responseTime:{type:String,default:"< 2 საათი"},languages:[{type:String}]},warranty:{type:String}},stats:{avgRating:{type:Number,default:4.5,min:0,max:5},totalReviews:{type:Number,default:0},successRate:{type:Number,default:95,min:0,max:100},completionRate:{type:Number,default:90,min:0,max:100},repeatPurchase:{type:Number,default:60,min:0,max:100}},updates:{lastUpdated:{type:String},changelog:[{version:{type:String},date:{type:String},changes:[{type:String}]}],roadmap:[{type:String}]}},{timestamps:!0,suppressReservedKeysWarning:!0});n.index({name:"text",description:"text",codename:"text"});let o=a().models.Bot||a().model("Bot",n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5972],()=>r(12986));module.exports=i})();