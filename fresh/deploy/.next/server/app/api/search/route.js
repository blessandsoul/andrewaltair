"use strict";(()=>{var e={};e.id=280,e.ids=[280,7861,3959],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97164:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>y,serverHooks:()=>h,staticGenerationAsyncStorage:()=>S});var i={};r.r(i),r.d(i,{GET:()=>g,dynamic:()=>c});var n=r(49303),a=r(88716),o=r(60670),u=r(87070),s=r(75748),d=r(23959),l=r(48222),p=r(7861);let c="force-dynamic",m=new Map;async function g(e){if(!function(e){let t=Date.now(),r=m.get(e);if(m.size>1e4)for(let[e,r]of m.entries())t>r.resetTime&&m.delete(e);return!r||t>r.resetTime?(m.set(e,{count:1,resetTime:t+6e4}),{allowed:!0}):r.count>=30?{allowed:!1}:(r.count++,{allowed:!0})}(e.headers.get("x-forwarded-for")?.split(",")[0]||e.headers.get("x-real-ip")||"unknown").allowed)return u.NextResponse.json({error:"Too many requests. Please slow down.",results:[],total:0},{status:429});try{await (0,s.Z)();let{searchParams:t}=new URL(e.url),r=t.get("q")||"",i=t.get("type"),n=parseInt(t.get("limit")||"10");if(!r||r.length<2)return u.NextResponse.json({results:[],total:0,message:"Query must be at least 2 characters"});let a=[],o=RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");return i&&"posts"!==i||(await d.default.find({status:"published",$or:[{title:o},{excerpt:o},{content:o},{tags:o},{numericId:{$regex:r,$options:"i"}}]}).limit(n).select("title slug excerpt coverImage category numericId").lean()).forEach(e=>{a.push({type:"post",id:e._id.toString(),title:e.title,description:e.excerpt,url:`/blog/${e.slug}`,image:e.coverImage,category:e.category})}),i&&"videos"!==i||(await l.Z.find({$or:[{title:o},{description:o},{category:o}]}).limit(n).select("title description youtubeId category").lean()).forEach(e=>{a.push({type:"video",id:e._id.toString(),title:e.title,description:e.description||"",url:`/videos/${e._id.toString()}`,image:`https://img.youtube.com/vi/${e.youtubeId}/mqdefault.jpg`,category:e.category})}),i&&"tools"!==i||(await p.default.find({$or:[{name:o},{description:o},{category:o}]}).limit(n).select("name description url logo category").lean()).forEach(e=>{a.push({type:"tool",id:e._id.toString(),title:e.name,description:e.description,url:e.url,image:e.logo,category:e.category})}),u.NextResponse.json({results:a,total:a.length,query:r})}catch(e){return console.error("Search error:",e),u.NextResponse.json({error:"Search failed"},{status:500})}}let y=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/search/route",pathname:"/api/search",filename:"route",bundlePath:"app/api/search/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\search\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:S,serverHooks:h}=y,x="/api/search/route";function w(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:S})}},75748:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(11185),n=r.n(i);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let u=async function(){if(o.conn)return o.conn;o.promise||(o.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},23959:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var i=r(11185),n=r.n(i);let a=new i.Schema({fire:{type:Number,default:0},love:{type:Number,default:0},mindblown:{type:Number,default:0},applause:{type:Number,default:0},insightful:{type:Number,default:0}},{_id:!1}),o=new i.Schema({metaTitle:{type:String,maxlength:60},metaDescription:{type:String,maxlength:160},keywords:{type:String},canonicalUrl:{type:String},focusKeyword:{type:String},seoScore:{type:Number,min:0,max:100},ogImage:{type:String}},{_id:!1}),u=new i.Schema({name:{type:String,required:!0},avatar:{type:String},role:{type:String}},{_id:!1}),s=new i.Schema({icon:{type:String},title:{type:String},content:{type:String,required:!0},type:{type:String,enum:["intro","section","sarcasm","warning","tip","fact","opinion","cta","hashtags","prompt","author-comment"],default:"section"}},{_id:!1}),d=new i.Schema({horizontal:{type:String},vertical:{type:String}},{_id:!1}),l=new i.Schema({src:{type:String,required:!0},alt:{type:String},caption:{type:String}},{_id:!1}),p=new i.Schema({url:{type:String,required:!0},platform:{type:String,enum:["youtube","vimeo"],required:!0},videoId:{type:String},thumbnailUrl:{type:String}},{_id:!1}),c=new i.Schema({slug:{type:String,required:[!0,"Slug is required"],unique:!0,trim:!0},title:{type:String,required:[!0,"Title is required"],trim:!0},excerpt:{type:String,required:[!0,"Excerpt is required"],trim:!0},content:{type:String,default:""},rawContent:{type:String,default:""},coverImage:{type:String},coverImages:{type:d},gallery:{type:[l],default:[]},sections:{type:[s],default:[]},category:{type:String,required:[!0,"Category is required"],index:!0},tags:{type:[String],default:[]},author:{type:u,required:!0},publishedAt:{type:Date,default:Date.now},readingTime:{type:Number,default:5},views:{type:Number,default:0},comments:{type:Number,default:0},shares:{type:Number,default:0},reactions:{type:a,default:()=>({fire:0,love:0,mindblown:0,applause:0,insightful:0})},featured:{type:Boolean,default:!1},trending:{type:Boolean,default:!1},status:{type:String,enum:["draft","published","scheduled","archived"],default:"draft",index:!0},scheduledFor:{type:Date},order:{type:Number,default:0},seo:{type:o,default:()=>({})},videos:{type:[p],default:[]},relatedPosts:{type:[String],default:[]},numericId:{type:String,unique:!0,sparse:!0,index:!0}},{timestamps:!0});c.index({title:"text",excerpt:"text",content:"text",rawContent:"text",numericId:"text"});let m=n().models.Post||n().model("Post",c)},7861:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var i=r(11185),n=r.n(i);let a=new i.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0},description:{type:String,required:[!0,"Description is required"],trim:!0},url:{type:String,required:[!0,"URL is required"],trim:!0},logo:{type:String},category:{type:String,required:[!0,"Category is required"],index:!0},pricing:{type:String,enum:["free","freemium","paid"],default:"freemium",index:!0},rating:{type:Number,default:4,min:1,max:5},featured:{type:Boolean,default:!1,index:!0},views:{type:Number,default:0}},{timestamps:!0});a.index({name:"text",description:"text",category:"text"});let o=n().models.Tool||n().model("Tool",a)},48222:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(11185),n=r.n(i);let a=new i.Schema({title:{type:String,required:[!0,"Title is required"],trim:!0},description:{type:String,required:[!0,"Description is required"],trim:!0},youtubeId:{type:String,required:[!0,"YouTube ID is required"],trim:!0},thumbnail:{type:String},category:{type:String,required:[!0,"Category is required"],index:!0},publishedAt:{type:Date,default:Date.now},views:{type:Number,default:0},duration:{type:String},type:{type:String,enum:["long","short"],default:"long"}},{timestamps:!0}),o=n().models.Video||n().model("Video",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5972],()=>r(97164));module.exports=i})();