"use strict";(()=>{var e={};e.id=8486,e.ids=[8486,7861],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2480:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var o={};t.r(o),t.d(o,{GET:()=>d,POST:()=>p});var n=t(49303),a=t(88716),i=t(60670),s=t(87070),u=t(75748),l=t(7861);async function p(e){try{await (0,u.Z)();let{tools:r,options:t={}}=await e.json();if(!Array.isArray(r)||0===r.length)return s.NextResponse.json({error:"Tools array is required"},{status:400});let{skipDuplicates:o=!0,updateExisting:n=!1}=t,a={imported:0,skipped:0,updated:0,errors:[]};for(let e of r)try{if(!e.name){a.errors.push({name:"unknown",error:"Name is required"});continue}let r=await l.default.findOne({name:e.name});r?n?(await l.default.findByIdAndUpdate(r._id,{...e,updatedAt:new Date}),a.updated++):o?a.skipped++:a.errors.push({name:e.name,error:"Already exists"}):(await l.default.create({name:e.name,description:e.description||"",url:e.url||"",logo:e.logo||"",category:e.category||"Other",pricing:e.pricing||"Free",rating:e.rating||0,features:e.features||[],pros:e.pros||[],cons:e.cons||[]}),a.imported++)}catch(t){let r=t instanceof Error?t.message:"Unknown error";a.errors.push({name:e.name||"unknown",error:r})}return s.NextResponse.json({success:!0,...a,total:r.length})}catch(e){return console.error("Bulk import error:",e),s.NextResponse.json({error:"Failed to import tools"},{status:500})}}async function d(){try{await (0,u.Z)();let e=await l.default.find({}).lean();return s.NextResponse.json({tools:e.map(e=>({name:e.name,description:e.description,url:e.url,logo:e.logo,category:e.category,pricing:e.pricing,rating:e.rating,features:e.features,pros:e.pros,cons:e.cons})),exportedAt:new Date().toISOString(),count:e.length})}catch(e){return console.error("Export tools error:",e),s.NextResponse.json({error:"Failed to export tools"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/tools/bulk/route",pathname:"/api/tools/bulk",filename:"route",bundlePath:"app/api/tools/bulk/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\tools\\bulk\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:f}=c,y="/api/tools/bulk/route";function x(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},75748:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(11185),n=t.n(o);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=i);let s=async function(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},7861:(e,r,t)=>{t.r(r),t.d(r,{default:()=>i});var o=t(11185),n=t.n(o);let a=new o.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0},description:{type:String,required:[!0,"Description is required"],trim:!0},url:{type:String,required:[!0,"URL is required"],trim:!0},logo:{type:String},category:{type:String,required:[!0,"Category is required"],index:!0},pricing:{type:String,enum:["free","freemium","paid"],default:"freemium",index:!0},rating:{type:Number,default:4,min:1,max:5},featured:{type:Boolean,default:!1,index:!0},views:{type:Number,default:0}},{timestamps:!0});a.index({name:"text",description:"text",category:"text"});let i=n().models.Tool||n().model("Tool",a)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(2480));module.exports=o})();