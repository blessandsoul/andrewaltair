"use strict";(()=>{var e={};e.id=8232,e.ids=[8232,7861],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35054:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>w,staticGenerationAsyncStorage:()=>x});var o={};r.r(o),r.d(o,{DELETE:()=>m,GET:()=>c,PUT:()=>g});var n=r(49303),i=r(88716),a=r(60670),s=r(87070),d=r(75748),l=r(7861),u=r(11185),p=r.n(u);async function c(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!p().Types.ObjectId.isValid(e))return s.NextResponse.json({error:"Invalid tool ID"},{status:400});let r=await l.default.findById(e).lean();if(!r)return s.NextResponse.json({error:"Tool not found"},{status:404});return await l.default.findByIdAndUpdate(e,{$inc:{views:1}}),s.NextResponse.json({id:r._id.toString(),name:r.name,description:r.description,url:r.url,logo:r.logo,category:r.category,pricing:r.pricing,rating:r.rating,featured:r.featured,views:r.views})}catch(e){return console.error("Get tool error:",e),s.NextResponse.json({error:"Failed to fetch tool"},{status:500})}}async function g(e,{params:t}){try{await (0,d.Z)();let{id:r}=await t,o=await e.json();if(!p().Types.ObjectId.isValid(r))return s.NextResponse.json({error:"Invalid tool ID"},{status:400});let n=await l.default.findByIdAndUpdate(r,{$set:{name:o.name,description:o.description,url:o.url,logo:o.logo,category:o.category,pricing:o.pricing,rating:o.rating,featured:o.featured}},{new:!0}).lean();if(!n)return s.NextResponse.json({error:"Tool not found"},{status:404});return s.NextResponse.json({id:n._id.toString(),name:n.name,description:n.description,url:n.url,logo:n.logo,category:n.category,pricing:n.pricing,rating:n.rating,featured:n.featured})}catch(e){return console.error("Update tool error:",e),s.NextResponse.json({error:"Failed to update tool"},{status:500})}}async function m(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!p().Types.ObjectId.isValid(e))return s.NextResponse.json({error:"Invalid tool ID"},{status:400});if(!await l.default.findByIdAndDelete(e))return s.NextResponse.json({error:"Tool not found"},{status:404});return s.NextResponse.json({message:"Tool deleted successfully"})}catch(e){return console.error("Delete tool error:",e),s.NextResponse.json({error:"Failed to delete tool"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/tools/[id]/route",pathname:"/api/tools/[id]",filename:"route",bundlePath:"app/api/tools/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\tools\\[id]\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:y,staticGenerationAsyncStorage:x,serverHooks:w}=f,v="/api/tools/[id]/route";function h(){return(0,a.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:x})}},75748:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(11185),n=r.n(o);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=a);let s=async function(){if(a.conn)return a.conn;a.promise||(a.promise=n().connect(i,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}},7861:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(11185),n=r.n(o);let i=new o.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0},description:{type:String,required:[!0,"Description is required"],trim:!0},url:{type:String,required:[!0,"URL is required"],trim:!0},logo:{type:String},category:{type:String,required:[!0,"Category is required"],index:!0},pricing:{type:String,enum:["free","freemium","paid"],default:"freemium",index:!0},rating:{type:Number,default:4,min:1,max:5},featured:{type:Boolean,default:!1,index:!0},views:{type:Number,default:0}},{timestamps:!0});i.index({name:"text",description:"text",category:"text"});let a=n().models.Tool||n().model("Tool",i)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972],()=>r(35054));module.exports=o})();