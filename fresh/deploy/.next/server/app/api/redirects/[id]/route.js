"use strict";(()=>{var e={};e.id=9710,e.ids=[9710],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90896:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var n={};t.r(n),t.d(n,{DELETE:()=>c,PUT:()=>p});var o=t(49303),s=t(88716),i=t(60670),a=t(87070),d=t(75748),u=t(32061);async function c(e,{params:r}){try{await (0,d.Z)();let{id:e}=await r;if(!await u.Z.findByIdAndDelete(e))return a.NextResponse.json({error:"Redirect not found"},{status:404});return a.NextResponse.json({success:!0,message:"Redirect deleted successfully"})}catch(e){return console.error("Delete redirect error:",e),a.NextResponse.json({error:"Failed to delete redirect"},{status:500})}}async function p(e,{params:r}){try{await (0,d.Z)();let{id:e}=await r,t=await u.Z.findByIdAndUpdate(e,{$inc:{hits:1}},{new:!0}).lean();if(!t)return a.NextResponse.json({error:"Redirect not found"},{status:404});return a.NextResponse.json({success:!0,redirect:{...t,id:t._id.toString()}})}catch(e){return console.error("Update redirect error:",e),a.NextResponse.json({error:"Failed to update redirect"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/redirects/[id]/route",pathname:"/api/redirects/[id]",filename:"route",bundlePath:"app/api/redirects/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\redirects\\[id]\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:h}=l,g="/api/redirects/[id]/route";function x(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},75748:(e,r,t)=>{t.d(r,{Z:()=>a});var n=t(11185),o=t.n(n);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=i);let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=o().connect(s,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},32061:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(11185),o=t.n(n);let s=new n.Schema({from:{type:String,required:[!0,"From path is required"]},to:{type:String,required:[!0,"To path is required"]},type:{type:Number,enum:[301,302],default:301},hits:{type:Number,default:0}},{timestamps:!0});s.index({from:1},{unique:!0});let i=o().models.Redirect||o().model("Redirect",s)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972],()=>t(90896));module.exports=n})();