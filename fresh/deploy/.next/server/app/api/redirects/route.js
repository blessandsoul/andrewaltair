"use strict";(()=>{var e={};e.id=9768,e.ids=[9768],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12913:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{GET:()=>u,POST:()=>p});var n=t(49303),i=t(88716),s=t(60670),a=t(87070),d=t(75748),c=t(32061);async function u(){try{await (0,d.Z)();let e=(await c.Z.find({}).sort({hits:-1}).lean()).map(e=>({...e,id:e._id.toString(),_id:void 0}));return a.NextResponse.json({redirects:e})}catch(e){return console.error("Get redirects error:",e),a.NextResponse.json({error:"Failed to fetch redirects"},{status:500})}}async function p(e){try{await (0,d.Z)();let r=await e.json(),t=new c.Z(r);return await t.save(),a.NextResponse.json({success:!0,redirect:{...t.toObject(),id:t._id.toString()}})}catch(e){return console.error("Create redirect error:",e),a.NextResponse.json({error:"Failed to create redirect"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/redirects/route",pathname:"/api/redirects",filename:"route",bundlePath:"app/api/redirects/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\redirects\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f}=l,g="/api/redirects/route";function v(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},75748:(e,r,t)=>{t.d(r,{Z:()=>a});var o=t(11185),n=t.n(o);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let a=async function(){if(s.conn)return s.conn;s.promise||(s.promise=n().connect(i,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},32061:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(11185),n=t.n(o);let i=new o.Schema({from:{type:String,required:[!0,"From path is required"]},to:{type:String,required:[!0,"To path is required"]},type:{type:Number,enum:[301,302],default:301},hits:{type:Number,default:0}},{timestamps:!0});i.index({from:1},{unique:!0});let s=n().models.Redirect||n().model("Redirect",i)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(12913));module.exports=o})();