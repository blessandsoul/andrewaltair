"use strict";(()=>{var e={};e.id=1996,e.ids=[1996],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},66465:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>f,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};o.r(n),o.d(n,{GET:()=>l,POST:()=>p});var r=o(49303),i=o(88716),a=o(60670),s=o(87070),c=o(75748),u=o(17668);async function l(){try{await (0,c.Z)();let e=(await u.Z.find({}).sort({createdAt:-1}).limit(20).lean()).map(e=>({...e,id:e._id.toString(),time:e.createdAt,_id:void 0}));return s.NextResponse.json({notifications:e})}catch(e){return console.error("Get notifications error:",e),s.NextResponse.json({error:"Failed to fetch notifications"},{status:500})}}async function p(e){try{await (0,c.Z)();let t=await e.json(),o=new u.Z(t);return await o.save(),s.NextResponse.json({success:!0,notification:{...o.toObject(),id:o._id.toString()}})}catch(e){return console.error("Create notification error:",e),s.NextResponse.json({error:"Failed to create notification"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/notifications/route",pathname:"/api/notifications",filename:"route",bundlePath:"app/api/notifications/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\notifications\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:g}=d,h="/api/notifications/route";function v(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},75748:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(11185),r=o.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=a);let s=async function(){if(a.conn)return a.conn;a.promise||(a.promise=r().connect(i,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}},17668:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(11185),r=o.n(n);let i=new n.Schema({type:{type:String,enum:["info","success","warning","error"],default:"info"},message:{type:String,required:[!0,"Message is required"]},read:{type:Boolean,default:!1}},{timestamps:!0}),a=r().models.Notification||r().model("Notification",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[8948,5972],()=>o(66465));module.exports=n})();