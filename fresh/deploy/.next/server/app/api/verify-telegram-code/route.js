"use strict";(()=>{var e={};e.id=9463,e.ids=[9463],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},43072:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var r={};t.r(r),t.d(r,{POST:()=>p,PUT:()=>d});var o=t(49303),a=t(88716),n=t(60670),i=t(87070);let u=new Map,c=["bot-content-writer","bot-social-media","bot-email-writer"];async function p(e){try{let{code:s}=await e.json();if(!s||"string"!=typeof s)return i.NextResponse.json({success:!1,message:"კოდი არ არის მითითებული"},{status:400});let t=s.trim().toUpperCase(),r=u.get(t);if(!r)return i.NextResponse.json({success:!1,message:"არასწორი კოდი"},{status:404});if(Date.now()>r.expiresAt)return u.delete(t),i.NextResponse.json({success:!1,message:"კოდის ვადა გაუვიდა"},{status:410});if(r.used)return i.NextResponse.json({success:!1,message:"კოდი უკვე გამოყენებულია"},{status:409});return r.used=!0,u.set(t,r),i.NextResponse.json({success:!0,message:"კოდი დადასტურებულია",freeBots:c,userId:r.userId})}catch(e){return console.error("Telegram code verification error:",e),i.NextResponse.json({success:!1,message:"სერვერის შეცდომა"},{status:500})}}async function d(e){try{let{userId:s,telegramUsername:t}=await e.json();if(!s)return i.NextResponse.json({success:!1,message:"userId is required"},{status:400});let r=Math.random().toString(36).substring(2,8).toUpperCase(),o=Date.now()+864e5;for(let[e,t]of(u.set(r,{userId:s,expiresAt:o,used:!1}),u.entries()))Date.now()>t.expiresAt&&u.delete(e);return i.NextResponse.json({success:!0,code:r,expiresAt:o,message:`Your verification code is: ${r}
Valid for 24 hours.`})}catch(e){return console.error("Code generation error:",e),i.NextResponse.json({success:!1,message:"Server error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/verify-telegram-code/route",pathname:"/api/verify-telegram-code",filename:"route",bundlePath:"app/api/verify-telegram-code/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\verify-telegram-code\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:f}=l,x="/api/verify-telegram-code/route";function v(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,5972],()=>t(43072));module.exports=r})();