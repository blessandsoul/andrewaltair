"use strict";(()=>{var e={};e.id=5719,e.ids=[5719],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45535:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{DELETE:()=>c,GET:()=>l,PUT:()=>p});var a=r(49303),i=r(88716),o=r(60670),s=r(87070),d=r(75748),u=r(98071);async function l(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t,r=await u.Z.findById(e).lean();if(!r)return s.NextResponse.json({error:"Media not found"},{status:404});return s.NextResponse.json({media:{...r,id:r._id.toString()}})}catch(e){return console.error("Get media error:",e),s.NextResponse.json({error:"Failed to fetch media"},{status:500})}}async function p(e,{params:t}){try{await (0,d.Z)();let{id:r}=await t,n=await e.json();delete n.id,delete n._id;let a=await u.Z.findByIdAndUpdate(r,{$set:n},{new:!0,runValidators:!0}).lean();if(!a)return s.NextResponse.json({error:"Media not found"},{status:404});return s.NextResponse.json({success:!0,media:{...a,id:a._id.toString()}})}catch(e){return console.error("Update media error:",e),s.NextResponse.json({error:"Failed to update media"},{status:500})}}async function c(e,{params:t}){try{await (0,d.Z)();let{id:e}=await t;if(!await u.Z.findByIdAndDelete(e))return s.NextResponse.json({error:"Media not found"},{status:404});return s.NextResponse.json({success:!0,message:"Media deleted successfully"})}catch(e){return console.error("Delete media error:",e),s.NextResponse.json({error:"Failed to delete media"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/media/[id]/route",pathname:"/api/media/[id]",filename:"route",bundlePath:"app/api/media/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\GITHUB\\andrewaltair\\fresh\\src\\app\\api\\media\\[id]\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:g,serverHooks:y}=m,x="/api/media/[id]/route";function h(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},75748:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(11185),a=r.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let s=async function(){if(o.conn)return o.conn;o.promise||(o.promise=a().connect(i,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},98071:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(11185),a=r.n(n);let i=new n.Schema({name:{type:String,required:[!0,"Name is required"],trim:!0},url:{type:String,required:[!0,"URL is required"]},type:{type:String,enum:["image","video"],default:"image"},size:{type:String,default:"0 KB"},sizeBytes:{type:Number,default:0},width:{type:Number},height:{type:Number},altText:{type:String,default:""},caption:{type:String,default:""},folder:{type:String,default:"all"},usedIn:[{id:String,title:String,type:String}],uploadedAt:{type:Date,default:Date.now}},{timestamps:!0});i.index({name:"text",altText:"text",caption:"text"}),i.index({folder:1});let o=a().models.Media||a().model("Media",i)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,5972],()=>r(45535));module.exports=n})();