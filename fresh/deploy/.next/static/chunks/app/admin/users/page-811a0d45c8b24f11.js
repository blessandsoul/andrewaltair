(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{54707:function(e,s,t){Promise.resolve().then(t.bind(t,57980))},57980:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),r=t(2265),i=t(48185),l=t(89733),n=t(77209),c=t(79055),d=t(44541),o=t(2128),m=t(72655);let u=[{id:"1",user:"Andrew Altair",action:"Updated",target:"პოსტი: ChatGPT Tips",timestamp:"5 წთ წინ",type:"update"},{id:"2",user:"Andrew Altair",action:"Created",target:"ვიდეო: AI Tutorial",timestamp:"1 სთ წინ",type:"create"},{id:"3",user:"Editor User",action:"Deleted",target:"კომენტარი #123",timestamp:"2 სთ წინ",type:"delete"},{id:"4",user:"Andrew Altair",action:"Login",target:"Admin Panel",timestamp:"3 სთ წინ",type:"login"},{id:"5",user:"Viewer User",action:"Logout",target:"Admin Panel",timestamp:"1 დღე წინ",type:"logout"}],x=[{id:"1",user:"Andrew Altair",ip:"192.168.1.1",device:"Desktop",browser:"TbBrandChrome 120",timestamp:"2024-12-25 14:30",status:"success"},{id:"2",user:"Andrew Altair",ip:"192.168.1.1",device:"Mobile",browser:"Safari",timestamp:"2024-12-24 10:15",status:"success"},{id:"3",user:"Unknown",ip:"45.67.89.12",device:"Desktop",browser:"Firefox",timestamp:"2024-12-23 22:45",status:"failed"}];function h(){let[e,s]=r.useState([]),[t,h]=r.useState(!0),[g,v]=r.useState("users"),[N,b]=r.useState(""),[w,y]=r.useState(!1),[k,C]=r.useState(!1),[z,A]=r.useState(!1),[S,P]=r.useState(null),B=()=>{{let e=localStorage.getItem("user");if(e)try{return JSON.parse(e).token}catch(e){}}return null};r.useEffect(()=>{!async function(){let e=B();if(!e){h(!1);return}try{let t=await fetch("/api/users?limit=100",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=((await t.json()).users||[]).map(e=>{var s;return{id:e.id,name:e.fullName||e.username||"Unknown",email:e.email||"",role:e.role||"viewer",lastLogin:e.lastLogin||"არასდროს",status:e.status||"active",twoFA:e.twoFA||!1,registeredAt:(null===(s=e.createdAt)||void 0===s?void 0:s.split("T")[0])||"",sessions:e.sessions||0}});s(e)}}catch(e){console.error("Error fetching users:",e)}finally{h(!1)}}()},[]);let[Q,T]=r.useState(new Set),[L,O]=r.useState("all"),[E,_]=r.useState("all"),[F,V]=r.useState("name"),[I,R]=r.useState("asc"),[U,Y]=r.useState(1),[D,Z]=r.useState(10),M=e.filter(e=>{let s=e.name.toLowerCase().includes(N.toLowerCase())||e.email.toLowerCase().includes(N.toLowerCase()),t="all"===L||e.role===L,a="all"===E||e.status===E;return s&&t&&a}),J=[...M].sort((e,s)=>{let t=0;switch(F){case"name":t=e.name.localeCompare(s.name);break;case"role":t=e.role.localeCompare(s.role);break;case"lastLogin":t=e.lastLogin.localeCompare(s.lastLogin);break;case"status":t=e.status.localeCompare(s.status)}return"asc"===I?t:-t}),G=Math.ceil(J.length/D),$=J.slice((U-1)*D,U*D),X=e=>{F===e?R("asc"===I?"desc":"asc"):(V(e),R("asc"))},H=e=>{let s=new Set(Q);s.has(e)?s.delete(e):s.add(e),T(s)},W=async()=>{if(confirm("წაშალოთ ".concat(Q.size," მომხმარებელი?"))){let t=B();try{await Promise.all(Array.from(Q).map(e=>fetch("/api/users/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}))),s(e.filter(e=>!Q.has(e.id))),T(new Set)}catch(e){console.error("Bulk delete error:",e),alert("შეცდომა წაშლისას")}}},K=async t=>{let a=B();try{await Promise.all(Array.from(Q).map(e=>fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({role:t})}))),s(e.map(e=>Q.has(e.id)?{...e,role:t}:e)),T(new Set)}catch(e){console.error("Bulk change role error:",e)}},q=async()=>{let t=B();try{await Promise.all(Array.from(Q).map(e=>fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:"blocked"})}))),s(e.map(e=>Q.has(e.id)?{...e,status:"blocked"}:e)),T(new Set)}catch(e){console.error("Bulk block error:",e)}},ee=async(t,a)=>{let r=B();try{(await fetch("/api/users/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({role:a})})).ok&&s(e.map(e=>e.id===t?{...e,role:a}:e))}catch(e){console.error("Change role error:",e)}},es=async t=>{let a=B();try{let r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({username:t.email.split("@")[0],email:t.email,fullName:t.name,role:t.role,password:"temp123456"})});if(r.ok){let a=await r.json(),i={...t,id:a.user.id,lastLogin:"არასდროს",status:"active",twoFA:!1,registeredAt:new Date().toISOString().split("T")[0],sessions:0};s([...e,i]),y(!1)}else{let e=await r.json();alert(e.error||"შეცდომა დამატებისას")}}catch(e){console.error("Add user error:",e),alert("შეცდომა დამატებისას")}},et=async t=>{let a=B();try{(await fetch("/api/users/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({fullName:t.name,email:t.email,role:t.role})})).ok&&(s(e.map(e=>e.id===t.id?t:e)),C(!1),P(null))}catch(e){console.error("Update user error:",e)}},ea=async t=>{if(confirm("წაშალოთ მომხმარებელი?")){let a=B();try{let r=await fetch("/api/users/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(r.ok)s(e.filter(e=>e.id!==t));else{let e=await r.json();alert(e.error||"შეცდომა წაშლისას")}}catch(e){console.error("Delete user error:",e)}}},er=async t=>{let a=e.find(e=>e.id===t);if(!a)return;let r=B(),i="blocked"===a.status?"active":"blocked";try{(await fetch("/api/users/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({status:i})})).ok&&s(e.map(e=>e.id===t?{...e,status:i}:e))}catch(e){console.error("Toggle block error:",e)}},ei=t=>{s(e.map(e=>e.id===t?{...e,twoFA:!e.twoFA}:e))},el=t=>{confirm("დაასრულოთ მომხმარებლის ყველა სესია?")&&(s(e.map(e=>e.id===t?{...e,sessions:0}:e)),alert("სესიები დასრულებულია"))},en=e=>{let{field:s,children:t}=e;return(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium cursor-pointer hover:bg-muted/50 select-none",onClick:()=>X(s),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[t,F===s&&("asc"===I?(0,a.jsx)(m.YeS,{className:"w-4 h-4"}):(0,a.jsx)(m.YRR,{className:"w-4 h-4"}))]})})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,a.jsx)(m.HLl,{className:"w-8 h-8 text-indigo-500"}),"მომხმარებლები"]}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," მომხმარებელი"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",className:"gap-2",onClick:()=>{let e=new Blob([["სახელი,ელ.ფოსტა,როლი,სტატუსი,ბოლო შესვლა,2FA,რეგისტრაცია",...M.map(e=>[e.name,e.email,e.role,e.status,e.lastLogin,e.twoFA?"ჩართული":"გამორთული",e.registeredAt]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="users.csv",t.click()},children:[(0,a.jsx)(m.HXz,{className:"w-4 h-4"}),"ექსპორტი"]}),(0,a.jsxs)(l.z,{className:"gap-2",onClick:()=>y(!0),children:[(0,a.jsx)(m.xv7,{className:"w-4 h-4"}),"დამატება"]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 border-b",children:[{id:"users",label:"მომხმარებლები",icon:m.HLl},{id:"activity",label:"აქტივობა",icon:m.aoj},{id:"logins",label:"შესვლების ისტორია",icon:m.rfE}].map(e=>(0,a.jsxs)("button",{onClick:()=>v(e.id),className:"flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ".concat(g===e.id?"border-indigo-500 text-indigo-500":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),"users"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[(0,a.jsx)(m.adB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(n.I,{placeholder:"ძიება...",value:N,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(o.Ph,{value:L,onValueChange:O,children:[(0,a.jsx)(o.i4,{className:"w-[140px]",children:(0,a.jsx)(o.ki,{placeholder:"როლი"})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"all",children:"ყველა როლი"}),(0,a.jsx)(o.Ql,{value:"admin",children:"ადმინი"}),(0,a.jsx)(o.Ql,{value:"editor",children:"ედიტორი"}),(0,a.jsx)(o.Ql,{value:"viewer",children:"მნახველი"})]})]}),(0,a.jsxs)(o.Ph,{value:E,onValueChange:_,children:[(0,a.jsx)(o.i4,{className:"w-[140px]",children:(0,a.jsx)(o.ki,{placeholder:"სტატუსი"})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"all",children:"ყველა"}),(0,a.jsx)(o.Ql,{value:"active",children:"აქტიური"}),(0,a.jsx)(o.Ql,{value:"inactive",children:"არააქტიური"}),(0,a.jsx)(o.Ql,{value:"blocked",children:"დაბლოკილი"})]})]})]}),Q.size>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-indigo-500/10 rounded-lg border border-indigo-500/20",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Q.size," არჩეული"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.z,{size:"sm",variant:"outline",onClick:()=>K("editor"),children:"ედიტორი"}),(0,a.jsx)(l.z,{size:"sm",variant:"outline",onClick:()=>K("viewer"),children:"მნახველი"}),(0,a.jsxs)(l.z,{size:"sm",variant:"outline",onClick:q,children:[(0,a.jsx)(m.s7E,{className:"w-4 h-4 mr-1"}),"დაბლოკვა"]}),(0,a.jsxs)(l.z,{size:"sm",variant:"destructive",onClick:W,children:[(0,a.jsx)(m.EF5,{className:"w-4 h-4 mr-1"}),"წაშლა"]})]})]}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-0",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 w-10",children:(0,a.jsx)(d.X,{checked:$.length>0&&Q.size===$.length,onCheckedChange:()=>{Q.size===$.length?T(new Set):T(new Set($.map(e=>e.id)))}})}),(0,a.jsx)(en,{field:"name",children:"მომხმარებელი"}),(0,a.jsx)(en,{field:"role",children:"როლი"}),(0,a.jsx)(en,{field:"lastLogin",children:"ბოლო შესვლა"}),(0,a.jsx)(en,{field:"status",children:"სტატუსი"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium",children:"2FA"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 font-medium",children:"მოქმედება"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:$.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30 ".concat("blocked"===e.status?"opacity-60":""),children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(d.X,{checked:Q.has(e.id),onCheckedChange:()=>H(e.id)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{P(e),A(!0)},children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.name[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium hover:text-indigo-500",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)(o.Ph,{value:e.role,onValueChange:s=>ee(e.id,s),children:[(0,a.jsx)(o.i4,{className:"w-[130px]",children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"admin",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"ადმინი"]})}),(0,a.jsx)(o.Ql,{value:"editor",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"ედიტორი"]})}),(0,a.jsx)(o.Ql,{value:"viewer",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"მნახველი"]})})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:e.lastLogin}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(c.C,{variant:"active"===e.status?"default":"blocked"===e.status?"destructive":"secondary",children:"active"===e.status?"აქტიური":"blocked"===e.status?"დაბლოკილი":"არააქტიური"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.twoFA?(0,a.jsx)(m.lVr,{className:"w-5 h-5 text-green-500"}):(0,a.jsx)(m.IfG,{className:"w-5 h-5 text-muted-foreground"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{P(e),C(!0)},children:(0,a.jsx)(m.EMN,{className:"w-4 h-4"})}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>er(e.id),children:"blocked"===e.status?(0,a.jsx)(m.tWO,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(m.s7E,{className:"w-4 h-4 text-orange-500"})}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>ea(e.id),children:(0,a.jsx)(m.EF5,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"გვერდზე:"}),(0,a.jsxs)(o.Ph,{value:D.toString(),onValueChange:e=>{Z(Number(e)),Y(1)},children:[(0,a.jsx)(o.i4,{className:"w-[70px]",children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"10",children:"10"}),(0,a.jsx)(o.Ql,{value:"25",children:"25"}),(0,a.jsx)(o.Ql,{value:"50",children:"50"})]})]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[(U-1)*D+1,"-",Math.min(U*D,J.length)," / ",J.length]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(l.z,{variant:"outline",size:"icon",onClick:()=>Y(e=>Math.max(1,e-1)),disabled:1===U,children:(0,a.jsx)(m.BY8,{className:"w-4 h-4"})}),Array.from({length:G},(e,s)=>s+1).slice(Math.max(0,U-3),Math.min(G,U+2)).map(e=>(0,a.jsx)(l.z,{variant:U===e?"default":"outline",size:"icon",onClick:()=>Y(e),children:e},e)),(0,a.jsx)(l.z,{variant:"outline",size:"icon",onClick:()=>Y(e=>Math.min(G,e+1)),disabled:U===G,children:(0,a.jsx)(m.Ng7,{className:"w-4 h-4"})})]})]})]}),"activity"===g&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:"აქტივობის ჟურნალი"})}),(0,a.jsx)(i.aY,{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 rounded-lg bg-muted/30",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat("create"===e.type?"bg-green-500/10 text-green-500":"update"===e.type?"bg-blue-500/10 text-blue-500":"delete"===e.type?"bg-red-500/10 text-red-500":"login"===e.type?"bg-indigo-500/10 text-indigo-500":"bg-gray-500/10 text-gray-500"),children:"login"===e.type?(0,a.jsx)(m.V5F,{className:"w-4 h-4"}):"logout"===e.type?(0,a.jsx)(m.VUx,{className:"w-4 h-4"}):(0,a.jsx)(m.aoj,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"font-medium",children:[(0,a.jsx)("span",{className:"text-indigo-500",children:e.user})," ",e.action," ",(0,a.jsx)("span",{className:"text-muted-foreground",children:e.target})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.timestamp})]})]},e.id))})]}),"logins"===g&&(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-0",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium",children:"მომხმარებელი"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium",children:"IP"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium",children:"მოწყობილობა"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 font-medium",children:"თარიღი"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 font-medium",children:"სტატუსი"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.user}),(0,a.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:e.ip}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Desktop"===e.device?(0,a.jsx)(m.y1G,{className:"w-4 h-4 text-muted-foreground"}):(0,a.jsx)(m.QBi,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.browser})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:e.timestamp}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(c.C,{variant:"success"===e.status?"default":"destructive",children:"success"===e.status?"წარმატებული":"წარუმატებელი"})})})]},e.id))})]})})}),w&&(0,a.jsx)(p,{onClose:()=>y(!1),onAdd:es}),k&&S&&(0,a.jsx)(f,{user:S,onClose:()=>{C(!1),P(null)},onSave:et}),z&&S&&(0,a.jsx)(j,{user:S,onClose:()=>{A(!1),P(null)},onToggle2FA:()=>ei(S.id),onForceLogout:()=>el(S.id)})]})}function p(e){let{onClose:s,onAdd:t}=e,[c,d]=r.useState({name:"",email:"",password:"",confirmPassword:"",role:"viewer"}),[u,x]=r.useState(!1),[h,p]=r.useState({}),f=()=>{let e={};return c.name.trim()||(e.name="სახელი სავალდებულოა"),c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(e.email="არასწორი ფორმატი"):e.email="ელ.ფოსტა სავალდებულოა",c.password?c.password.length<6&&(e.password="მინიმუმ 6 სიმბოლო"):e.password="პაროლი სავალდებულოა",c.password!==c.confirmPassword&&(e.confirmPassword="პაროლები არ ემთხვევა"),p(e),0===Object.keys(e).length};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.xv7,{className:"w-5 h-5 text-indigo-500"}),"ახალი მომხმარებელი"]}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:s,children:(0,a.jsx)(m.lhV,{className:"w-4 h-4"})})]}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f()&&t({name:c.name,email:c.email,role:c.role})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(m.S8z,{className:"w-4 h-4 text-muted-foreground"}),"სახელი"]}),(0,a.jsx)(n.I,{placeholder:"სრული სახელი",value:c.name,onChange:e=>d({...c,name:e.target.value})}),h.name&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:h.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(m.QOK,{className:"w-4 h-4 text-muted-foreground"}),"ელ.ფოსტა"]}),(0,a.jsx)(n.I,{type:"email",placeholder:"email@example.com",value:c.email,onChange:e=>d({...c,email:e.target.value})}),h.email&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:h.email})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(m.A2B,{className:"w-4 h-4 text-muted-foreground"}),"პაროლი"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.I,{type:u?"text":"password",placeholder:"მინიმუმ 6 სიმბოლო",value:c.password,onChange:e=>d({...c,password:e.target.value})}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?(0,a.jsx)(m.wQf,{className:"w-4 h-4"}):(0,a.jsx)(m.f7Q,{className:"w-4 h-4"})})]}),h.password&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:h.password})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(m.A2B,{className:"w-4 h-4 text-muted-foreground"}),"პაროლის დადასტურება"]}),(0,a.jsx)(n.I,{type:u?"text":"password",placeholder:"გაიმეორეთ პაროლი",value:c.confirmPassword,onChange:e=>d({...c,confirmPassword:e.target.value})}),h.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:h.confirmPassword})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(m.$T2,{className:"w-4 h-4 text-muted-foreground"}),"როლი"]}),(0,a.jsxs)(o.Ph,{value:c.role,onValueChange:e=>d({...c,role:e}),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"admin",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"ადმინი"]})}),(0,a.jsx)(o.Ql,{value:"editor",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"ედიტორი"]})}),(0,a.jsx)(o.Ql,{value:"viewer",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"მნახველი"]})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:s,children:"გაუქმება"}),(0,a.jsxs)(l.z,{type:"submit",className:"gap-2",children:[(0,a.jsx)(m.e6w,{className:"w-4 h-4"}),"რეგისტრაცია"]})]})]})})]})})}function f(e){let{user:s,onClose:t,onSave:c}=e,[d,u]=r.useState({name:s.name,email:s.email,role:s.role});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t,children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.EMN,{className:"w-5 h-5 text-indigo-500"}),"რედაქტირება"]}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(m.lhV,{className:"w-4 h-4"})})]}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c({...s,...d})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"სახელი"}),(0,a.jsx)(n.I,{value:d.name,onChange:e=>u({...d,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ელ.ფოსტა"}),(0,a.jsx)(n.I,{type:"email",value:d.email,onChange:e=>u({...d,email:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"როლი"}),(0,a.jsxs)(o.Ph,{value:d.role,onValueChange:e=>u({...d,role:e}),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"admin",children:"ადმინი"}),(0,a.jsx)(o.Ql,{value:"editor",children:"ედიტორი"}),(0,a.jsx)(o.Ql,{value:"viewer",children:"მნახველი"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:t,children:"გაუქმება"}),(0,a.jsxs)(l.z,{type:"submit",className:"gap-2",children:[(0,a.jsx)(m.e6w,{className:"w-4 h-4"}),"შენახვა"]})]})]})})]})})}function j(e){let{user:s,onClose:t,onToggle2FA:r,onForceLogout:n}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t,children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(i.ll,{children:"პროფილი"}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(m.lhV,{className:"w-4 h-4"})})]}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:s.name[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:s.name}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s.email}),(0,a.jsx)(c.C,{className:"mt-1",children:s.role})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"რეგისტრაცია"}),(0,a.jsx)("p",{className:"font-medium",children:s.registeredAt})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ბოლო შესვლა"}),(0,a.jsx)("p",{className:"font-medium",children:s.lastLogin})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"აქტიური სესიები"}),(0,a.jsx)("p",{className:"font-medium",children:s.sessions})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"სტატუსი"}),(0,a.jsx)(c.C,{variant:"active"===s.status?"default":"blocked"===s.status?"destructive":"secondary",children:"active"===s.status?"აქტიური":"blocked"===s.status?"დაბლოკილი":"არააქტიური"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s.twoFA?(0,a.jsx)(m.lVr,{className:"w-5 h-5 text-green-500"}):(0,a.jsx)(m.IfG,{className:"w-5 h-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"ორფაქტორიანი ავთენტიფიკაცია"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s.twoFA?"ჩართულია":"გამორთულია"})]})]}),(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:r,children:s.twoFA?"გამორთვა":"ჩართვა"})]}),(0,a.jsxs)(l.z,{variant:"outline",className:"w-full gap-2",onClick:n,disabled:0===s.sessions,children:[(0,a.jsx)(m.mm_,{className:"w-4 h-4"}),"ყველა სესიის დასრულება (",s.sessions,")"]})]})]})]})})}},79055:function(e,s,t){"use strict";t.d(s,{C:function(){return c}});var a=t(57437);t(2265);var r=t(71538),i=t(13027),l=t(49354);let n=(0,i.j)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,asChild:i=!1,...c}=e,d=i?r.g7:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,l.cn)(n({variant:t}),s),...c})}},89733:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(57437);t(2265);var r=t(71538),i=t(13027),l=t(49354);let n=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t="default",size:i="default",asChild:c=!1,...d}=e,o=c?r.g7:"button";return(0,a.jsx)(o,{"data-slot":"button","data-variant":t,"data-size":i,className:(0,l.cn)(n({variant:t,size:i,className:s})),...d})}},48185:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return o},ll:function(){return n}});var a=t(57437);t(2265);var r=t(49354);function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col rounded-xl border shadow-sm overflow-hidden",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6 pb-6",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},44541:function(e,s,t){"use strict";t.d(s,{X:function(){return n}});var a=t(57437);t(2265);var r=t(69324),i=t(72655),l=t(49354);function n(e){let{className:s,...t}=e;return(0,a.jsx)(r.fC,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(r.z$,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,a.jsx)(i.e6w,{className:"size-3.5"})})})}},77209:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(57437);t(2265);var r=t(49354);function i(e){let{className:s,type:t,...i}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}},2128:function(e,s,t){"use strict";t.d(s,{Bw:function(){return h},DI:function(){return d},Ph:function(){return c},Ql:function(){return f},i4:function(){return m},ki:function(){return o},n5:function(){return p}});var a=t(57437),r=t(2265),i=t(48362),l=t(72655),n=t(49354);let c=i.fC,d=i.ZA,o=i.B4,m=r.forwardRef((e,s)=>{let{className:t,children:r,...c}=e;return(0,a.jsxs)(i.xz,{ref:s,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...c,children:[r,(0,a.jsx)(i.JO,{asChild:!0,children:(0,a.jsx)(l.YRR,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=i.xz.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.u_,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.YeS,{className:"h-4 w-4"})})});u.displayName=i.u_.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.$G,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.YRR,{className:"h-4 w-4"})})});x.displayName=i.$G.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:l="popper",...c}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsxs)(i.VY,{ref:s,className:(0,n.cn)("relative z-[99999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...c,children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.l_,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});h.displayName=i.VY.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.__,{ref:s,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})});p.displayName=i.__.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...c}=e;return(0,a.jsxs)(i.ck,{ref:s,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...c,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(l.e6w,{className:"h-4 w-4"})})}),(0,a.jsx)(i.eT,{children:r})]})});f.displayName=i.ck.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.Z0,{ref:s,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=i.Z0.displayName},49354:function(e,s,t){"use strict";t.d(s,{cn:function(){return i}});var a=t(44839),r=t(96164);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[6950,8534,7441,8362,1163,2971,7023,1744],function(){return e(e.s=54707)}),_N_E=e.O()}]);