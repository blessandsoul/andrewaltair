(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8188],{70444:function(e,t,s){Promise.resolve().then(s.bind(s,60732))},60732:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(57437),n=s(2265),r=s(16463),o=s(26323),i=s(72655);function l(e){let{params:t}=e,s=(0,r.useRouter)(),[l,c]=n.useState(null),[u,d]=n.useState(!0),{id:p}=n.use(t);n.useEffect(()=>{let e=async()=>{try{let e=await fetch("/api/posts/".concat(p));if(e.ok){let t=(await e.json()).post;c({id:t.id,slug:t.slug,title:t.title,type:t.type||"news",excerpt:t.excerpt,content:t.content,rawContent:t.rawContent,category:t.category,tags:t.tags||[],coverImage:t.coverImage,coverImages:t.coverImages||{},gallery:t.gallery||[],sections:t.sections||[],author:t.author,publishedAt:t.publishedAt,readingTime:t.readingTime,views:t.views,reactions:t.reactions||{fire:0,love:0,mindblown:0,applause:0,insightful:0},featured:t.featured||!1,trending:t.trending||!1,status:t.status||"published",scheduledFor:t.scheduledFor,videos:t.videos||[],relatedPosts:t.relatedPosts||[],seo:t.seo||{metaTitle:"",metaDescription:"",keywords:"",canonicalUrl:"",focusKeyword:"",seoScore:0,ogImage:""}})}else alert("პოსტი ვერ მოიძებნა"),s.push("/admin/posts")}catch(e){console.error("Error fetching post:",e),alert("შეცდომა პოსტის წამოღებისას")}finally{d(!1)}};p&&e()},[p,s]);let g=async e=>{try{var t;let a=await fetch("/api/posts/".concat(p),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,slug:e.slug||e.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,""),readingTime:e.readingTime||Math.ceil(((null===(t=e.rawContent)||void 0===t?void 0:t.split(" ").length)||0)/200)})});if(a.ok)alert("პოსტი წარმატებით განახლდა!"),s.push("/admin/posts");else{let e=await a.json();alert("შეცდომა: ".concat(e.error||"პოსტის განახლება ვერ მოხერხდა"))}}catch(e){console.error("Update post error:",e),alert("შეცდომა პოსტის განახლებისას")}};return u?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)(i.olI,{className:"w-8 h-8 animate-spin text-primary"})}):l?(0,a.jsx)(o.v,{initialData:l,onSave:g,onCancel:()=>{s.push("/admin/posts")}}):null}}},function(e){e.O(0,[6950,8534,162,2971,7023,1744],function(){return e(e.s=70444)}),_N_E=e.O()}]);