(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8629],{35863:function(e,t,r){Promise.resolve().then(r.bind(r,47072))},47072:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var a=r(57437);r(2265);var o=r(16463),n=r(26323);function s(){let e=(0,o.useRouter)(),t=async t=>{try{var r,a;let o=localStorage.getItem("admin_token");if(!o){alert("სესია ამოიწურა. გთხოვთ შეხვიდეთ თავიდან."),e.push("/admin");return}let n=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({title:t.title,slug:t.slug||t.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,""),excerpt:t.excerpt,content:t.content,rawContent:t.rawContent,coverImage:(null===(r=t.coverImages)||void 0===r?void 0:r.horizontal)||t.coverImage,coverImages:t.coverImages,gallery:t.gallery,sections:t.sections,category:t.category,tags:t.tags,author:{name:"Andrew Altair",avatar:"/avatar.jpg",role:"AI ინოვატორი"},status:t.status||"published",scheduledFor:t.scheduledFor,featured:t.featured||!1,trending:t.trending||!1,readingTime:t.readingTime||Math.ceil(((null===(a=t.rawContent)||void 0===a?void 0:a.split(" ").length)||0)/200),videos:t.videos||[],relatedPosts:t.relatedPosts||[],seo:t.seo})});if(n.ok)alert("პოსტი წარმატებით შეინახა!"),e.push("/admin/posts");else{let e=await n.json();alert("შეცდომა: ".concat(e.error||"პოსტის შენახვა ვერ მოხერხდა"))}}catch(e){console.error("Save post error:",e),alert("შეცდომა პოსტის შენახვისას")}};return(0,a.jsx)(n.v,{onSave:t,onCancel:()=>{e.push("/admin/posts")}})}}},function(e){e.O(0,[6950,8534,162,2971,7023,1744],function(){return e(e.s=35863)}),_N_E=e.O()}]);