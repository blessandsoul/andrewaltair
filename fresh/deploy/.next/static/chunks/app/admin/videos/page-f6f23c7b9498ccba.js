(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5312],{53022:function(e,s,t){Promise.resolve().then(t.bind(t,61107))},61107:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),l=t(2265),r=t(89733),n=t(77209),i=t(79055),c=t(48185),d=t(72655);let o=["ტუტორიალი","მიმოხილვა","ხრიკები","ინტერვიუ","პოდკასტი","ვლოგი"],u=["AI","ChatGPT","Gemini","DALL-E","Automation","Make.com","Prompts","Tutorial","Beginner","Advanced"];function m(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function x(e){let s=e.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([^"&?\/\s]{11})/);return s?s[1]:e}function h(){let[e,s]=l.useState([]),[t,o]=l.useState(!0),[x,h]=l.useState(""),[f,v]=l.useState(null),[j,b]=l.useState(null),[y,N]=l.useState("all"),[w,k]=l.useState(""),[C,z]=l.useState(!1),[S,I]=l.useState(null),[E,O]=l.useState(new Set),[D,A]=l.useState(!1),[_,L]=l.useState(!1),[R,Y]=l.useState(!1),[T,V]=l.useState(!1),[Z,P]=l.useState(!1),[F,M]=l.useState(null);l.useEffect(()=>{!async function(){try{let e=await fetch("/api/videos?limit=100");if(e.ok){let t=((await e.json()).videos||[]).map((e,s)=>{var t;return{...e,id:e.id||e.youtubeId,tags:e.tags||[],status:e.status||"published",order:null!==(t=e.order)&&void 0!==t?t:s,lastSynced:null}});s(t)}}catch(e){console.error("Error fetching videos:",e)}finally{o(!1)}}()},[]);let W=e.filter(e=>{let s=e.title.toLowerCase().includes(x.toLowerCase())||e.category.toLowerCase().includes(x.toLowerCase()),t="all"===y||e.type===y,a=!w||e.tags&&e.tags.includes(w);return s&&t&&a}).sort((e,s)=>{var t,a;return(null!==(t=e.order)&&void 0!==t?t:0)-(null!==(a=s.order)&&void 0!==a?a:0)}),$=e.reduce((e,s)=>e+s.views,0),B=Math.round($/e.length),G=e.filter(e=>"long"===e.type).length,J=e.filter(e=>"short"===e.type).length,U=[...e].sort((e,s)=>s.views-e.views).slice(0,5),q=async t=>{try{(await fetch("/api/videos/".concat(t),{method:"DELETE"})).ok?s(e.filter(e=>e.id!==t)):alert("შეცდომა წაშლისას")}catch(e){console.error("Delete error:",e),alert("შეცდომა წაშლისას")}b(null)},K=async()=>{try{await Promise.all(Array.from(E).map(e=>fetch("/api/videos/".concat(e),{method:"DELETE"}))),s(e.filter(e=>!E.has(e.id))),O(new Set)}catch(e){console.error("Bulk delete error:",e),alert("შეცდომა წაშლისას")}L(!1)},H=async t=>{try{let a=await fetch("/api/videos/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok){let l=await a.json();s(e.map(e=>e.id===t.id?{...t,...l.video}:e)),v(null)}else alert("შეცდომა შენახვისას")}catch(e){console.error("Save error:",e),alert("შეცდომა შენახვისას")}},Q=async t=>{try{let a=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,order:e.length})});if(a.ok){let l=await a.json();s([{...t,id:l.video.id,order:e.length},...e]),z(!1)}else alert("შეცდომა დამატებისას")}catch(e){console.error("Add error:",e),alert("შეცდომა დამატებისას")}},X=e=>{let s=new Set(E);s.has(e)?s.delete(e):s.add(e),O(s)},ee=async()=>{P(!0),await new Promise(e=>setTimeout(e,2e3)),s(e.map(e=>({...e,views:e.views+Math.floor(500*Math.random()),lastSynced:new Date().toISOString()}))),P(!1)},es=s=>{let t=new Blob(["json"===s?JSON.stringify(e,null,2):"id,title,youtubeId,category,views,type,publishedAt\n"+e.map(e=>"".concat(e.id,',"').concat(e.title,'",').concat(e.youtubeId,",").concat(e.category,",").concat(e.views,",").concat(e.type,",").concat(e.publishedAt)).join("\n")],{type:"json"===s?"application/json":"text/csv"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="videos.".concat(s),l.click(),URL.revokeObjectURL(a)},et=e=>{M(e)},ea=(t,a)=>{if(t.preventDefault(),F&&F!==a){let t=e.findIndex(e=>e.id===F),l=e.findIndex(e=>e.id===a),r=[...e],[n]=r.splice(t,1);r.splice(l,0,n),s(r.map((e,s)=>({...e,order:s})))}},el=()=>{M(null)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,a.jsx)(d.mL_,{className:"w-8 h-8 text-primary"}),"ვიდეოების მართვა"]}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:[W.length," ვიდეო • ",m($)," ნახვა"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(r.z,{variant:R?"default":"outline",size:"sm",onClick:()=>Y(!R),children:[(0,a.jsx)(d.hWk,{className:"w-4 h-4 mr-2"}),"ანალიტიკა"]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:ee,disabled:Z,children:[(0,a.jsx)(d.T8D,{className:"w-4 h-4 mr-2 ".concat(Z?"animate-spin":"")}),Z?"სინქრონიზაცია...":"YouTube Sync"]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>V(!T),children:[(0,a.jsx)(d.HXz,{className:"w-4 h-4 mr-2"}),"Import/Export"]}),(0,a.jsxs)(r.z,{onClick:()=>z(!0),children:[(0,a.jsx)(d.rIf,{className:"w-4 h-4 mr-2"}),"ვიდეოს დამატება"]})]})]}),T&&(0,a.jsx)(c.Zb,{className:"border-dashed",children:(0,a.jsx)(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>es("json"),children:[(0,a.jsx)(d.Bb$,{className:"w-4 h-4 mr-2"}),"Export JSON"]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>es("csv"),children:[(0,a.jsx)(d.aFM,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,a.jsx)("div",{className:"border-l mx-2"}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(d.S7F,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(d.YRG,{className:"w-4 h-4 mr-2"}),"Import from YouTube Playlist"]})]})})}),R&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(d.mL_,{className:"w-5 h-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"სულ ვიდეო"})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500/10 rounded-lg",children:(0,a.jsx)(d.f7Q,{className:"w-5 h-5 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:m($)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"სულ ნახვა"})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:(0,a.jsx)(d.ehl,{className:"w-5 h-5 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:m(B)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"საშუალო ნახვა"})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:(0,a.jsx)(d.aSH,{className:"w-5 h-5 text-purple-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[G,"/",J]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Long/Short"})]})]})})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsx)(c.ll,{className:"text-lg",children:"ტოპ 5 პოპულარული ვიდეო"})}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"space-y-2",children:U.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-sm font-bold",children:s+1}),(0,a.jsx)("img",{src:"https://img.youtube.com/vi/".concat(e.youtubeId,"/default.jpg"),alt:e.title,className:"w-16 h-9 rounded object-cover"}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"font-medium truncate",children:e.title})}),(0,a.jsxs)(i.C,{variant:"secondary",children:[m(e.views)," ნახვა"]})]},e.id))})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)(r.z,{variant:"ghost",size:"sm",onClick:()=>{E.size===W.length?O(new Set):O(new Set(W.map(e=>e.id)))},className:"gap-2",children:[E.size===W.length&&W.length>0?(0,a.jsx)(d.bGJ,{className:"w-4 h-4"}):(0,a.jsx)(d.MhI,{className:"w-4 h-4"}),E.size>0?"".concat(E.size," არჩეული"):"აირჩიე"]}),E.size>0&&(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(r.z,{variant:"destructive",size:"sm",onClick:()=>L(!0),children:[(0,a.jsx)(d.EF5,{className:"w-4 h-4 mr-2"}),"წაშლა (",E.size,")"]})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2 rounded-md border border-input bg-background text-sm",children:[(0,a.jsx)("option",{value:"",children:"ყველა თეგი"}),u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("div",{className:"flex rounded-lg border overflow-hidden",children:["all","long","short"].map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"px-3 py-2 text-sm font-medium transition-colors ".concat(y===e?"bg-primary text-primary-foreground":"hover:bg-muted"),children:"all"===e?"ყველა":"long"===e?"Long":"Short"},e))}),(0,a.jsxs)("div",{className:"relative w-full sm:w-60",children:[(0,a.jsx)(d.adB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(n.I,{placeholder:"ძიება...",value:x,onChange:e=>h(e.target.value),className:"pl-10"})]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:W.map(e=>(0,a.jsxs)(c.Zb,{className:"group hover:shadow-lg transition-all overflow-hidden ".concat(E.has(e.id)?"ring-2 ring-primary":""," ").concat(F===e.id?"opacity-50":""),draggable:!0,onDragStart:()=>et(e.id),onDragOver:s=>ea(s,e.id),onDragEnd:el,children:[(0,a.jsxs)("div",{className:"relative aspect-video bg-muted",children:[(0,a.jsx)("img",{src:"https://img.youtube.com/vi/".concat(e.youtubeId,"/mqdefault.jpg"),alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder-video.jpg"}}),(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),X(e.id)},className:"absolute top-2 left-2 p-1 bg-black/60 rounded hover:bg-black/80 transition-colors",children:E.has(e.id)?(0,a.jsx)(d.bGJ,{className:"w-5 h-5 text-primary"}):(0,a.jsx)(d.MhI,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("div",{className:"absolute top-2 left-10 p-1 bg-black/60 rounded cursor-grab opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(d.BoD,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("button",{onClick:()=>I(e),className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"w-14 h-14 bg-red-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.y82,{className:"w-7 h-7 text-white fill-white ml-1"})})}),(0,a.jsx)(i.C,{className:"absolute top-2 right-2",variant:"short"===e.type?"default":"secondary",children:"short"===e.type?"Short":"Long"}),e.status&&"published"!==e.status&&(0,a.jsx)(i.C,{className:"absolute top-9 right-2",variant:"scheduled"===e.status?"outline":"secondary",children:"scheduled"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.RgR,{className:"w-3 h-3 mr-1"}),"Scheduled"]}):"Draft"}),(0,a.jsx)("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded",children:e.duration})]}),(0,a.jsxs)(c.aY,{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold truncate",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-1",children:e.description}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map(e=>(0,a.jsxs)(i.C,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(d.b2n,{className:"w-2.5 h-2.5 mr-1"}),e]},e)),e.tags.length>3&&(0,a.jsxs)(i.C,{variant:"outline",className:"text-xs",children:["+",e.tags.length-3]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(d.f7Q,{className:"w-4 h-4"}),m(e.views)]}),(0,a.jsx)(i.C,{variant:"outline",children:e.category}),e.scheduledAt&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(d.RgR,{className:"w-3 h-3"}),new Date(e.scheduledAt).toLocaleDateString("ka-GE",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>v(e),children:[(0,a.jsx)(d.EMN,{className:"w-4 h-4 mr-2"}),"რედაქტირება"]}),(0,a.jsx)(r.z,{variant:"ghost",size:"icon",onClick:()=>window.open("https://youtube.com/watch?v=".concat(e.youtubeId),"_blank"),children:(0,a.jsx)(d.Ma9,{className:"w-4 h-4"})}),(0,a.jsx)(r.z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>b(e.id),children:(0,a.jsx)(d.EF5,{className:"w-4 h-4"})})]})]})]},e.id))}),C&&(0,a.jsx)(p,{onSave:Q,onClose:()=>z(!1)}),f&&(0,a.jsx)(g,{video:f,onSave:H,onClose:()=>v(null)}),S&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative w-full max-w-4xl",children:[(0,a.jsx)(r.z,{variant:"ghost",size:"icon",className:"absolute -top-12 right-0 text-white hover:bg-white/20",onClick:()=>I(null),children:(0,a.jsx)(d.lhV,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(S.youtubeId,"?autoplay=1"),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,a.jsx)("p",{className:"text-white text-center mt-4 font-medium",children:S.title})]})}),j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{className:"text-destructive",children:"წაშლის დადასტურება"})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsx)("p",{children:"ნამდვილად გსურთ ამ ვიდეოს წაშლა?"}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.z,{variant:"outline",onClick:()=>b(null),children:"გაუქმება"}),(0,a.jsx)(r.z,{variant:"destructive",onClick:()=>q(j),children:"წაშლა"})]})]})]})}),_&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{className:"text-destructive",children:"მასობრივი წაშლა"})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsxs)("p",{children:["ნამდვილად გსურთ ",E.size," ვიდეოს წაშლა?"]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.z,{variant:"outline",onClick:()=>L(!1),children:"გაუქმება"}),(0,a.jsxs)(r.z,{variant:"destructive",onClick:K,children:["წაშლა (",E.size,")"]})]})]})]})})]})}function p(e){let{onSave:s,onClose:t}=e,[m,h]=l.useState({title:"",description:"",youtubeId:"",category:o[0],duration:"",type:"long",tags:[],status:"published",scheduledAt:"",views:0,publishedAt:new Date().toISOString().split("T")[0]}),[p,g]=l.useState(""),f=e=>{let s=x(e);h({...m,youtubeId:s})},v=e=>{e&&!m.tags.includes(e)&&(h({...m,tags:[...m.tags,e]}),g(""))},j=e=>{h({...m,tags:m.tags.filter(s=>s!==e)})};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.rIf,{className:"w-5 h-5"}),"ახალი ვიდეოს დამატება"]}),(0,a.jsx)(r.z,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(d.lhV,{className:"w-4 h-4"})})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(m)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"სათაური *"}),(0,a.jsx)(n.I,{required:!0,value:m.title,onChange:e=>h({...m,title:e.target.value}),placeholder:"ვიდეოს სათაური"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"აღწერა"}),(0,a.jsx)("textarea",{className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:m.description,onChange:e=>h({...m,description:e.target.value}),placeholder:"ვიდეოს აღწერა"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"YouTube URL ან ID *"}),(0,a.jsx)(n.I,{required:!0,value:m.youtubeId,onChange:e=>f(e.target.value),placeholder:"https://youtube.com/watch?v=... ან ID"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"კატეგორია"}),(0,a.jsx)("select",{value:m.category,onChange:e=>h({...m,category:e.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:o.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ხანგრძლივობა"}),(0,a.jsx)(n.I,{value:m.duration,onChange:e=>h({...m,duration:e.target.value}),placeholder:"12:34"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ტიპი"}),(0,a.jsx)("div",{className:"flex gap-2",children:["long","short"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>h({...m,type:e}),className:"flex-1 px-3 py-2 rounded-md border text-sm font-medium transition-colors ".concat(m.type===e?"bg-primary text-primary-foreground border-primary":"border-input hover:bg-muted"),children:"long"===e?"Long":"Short"},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"თეგები"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:m.tags.map(e=>(0,a.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>j(e),children:(0,a.jsx)(d.lhV,{className:"w-3 h-3"})})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.I,{value:p,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),v(p)),placeholder:"თეგის დამატება...",className:"flex-1"}),(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>v(p),children:(0,a.jsx)(d.rIf,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:u.filter(e=>!m.tags.includes(e)).slice(0,5).map(e=>(0,a.jsxs)(i.C,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>v(e),children:["+ ",e]},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"სტატუსი"}),(0,a.jsxs)("select",{value:m.status,onChange:e=>h({...m,status:e.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"published",children:"გამოქვეყნებული"}),(0,a.jsx)("option",{value:"draft",children:"დრაფტი"}),(0,a.jsx)("option",{value:"scheduled",children:"დაგეგმილი"})]})]}),"scheduled"===m.status&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"გამოქვეყნების თარიღი"}),(0,a.jsx)(n.I,{type:"datetime-local",value:m.scheduledAt,onChange:e=>h({...m,scheduledAt:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:t,children:"გაუქმება"}),(0,a.jsxs)(r.z,{type:"submit",children:[(0,a.jsx)(d.rIf,{className:"w-4 h-4 mr-2"}),"დამატება"]})]})]})})]})})}function g(e){let{video:s,onSave:t,onClose:m}=e,[h,p]=l.useState({title:s.title,description:s.description,youtubeId:s.youtubeId,category:s.category,duration:s.duration,type:s.type,tags:s.tags||[],status:s.status||"published",scheduledAt:s.scheduledAt||""}),[g,f]=l.useState(""),v=e=>{e&&!h.tags.includes(e)&&(p({...h,tags:[...h.tags,e]}),f(""))},j=e=>{p({...h,tags:h.tags.filter(s=>s!==e)})};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(c.ll,{children:"ვიდეოს რედაქტირება"}),(0,a.jsx)(r.z,{variant:"ghost",size:"icon",onClick:m,children:(0,a.jsx)(d.lhV,{className:"w-4 h-4"})})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({...s,...h})},className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:"https://img.youtube.com/vi/".concat(h.youtubeId,"/mqdefault.jpg"),alt:h.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"სათაური"}),(0,a.jsx)(n.I,{value:h.title,onChange:e=>p({...h,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"აღწერა"}),(0,a.jsx)("textarea",{className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:h.description,onChange:e=>p({...h,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"YouTube ID"}),(0,a.jsx)(n.I,{value:h.youtubeId,onChange:e=>p({...h,youtubeId:x(e.target.value)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"კატეგორია"}),(0,a.jsx)("select",{value:h.category,onChange:e=>p({...h,category:e.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:o.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ხანგრძლივობა"}),(0,a.jsx)(n.I,{value:h.duration,onChange:e=>p({...h,duration:e.target.value}),placeholder:"12:34"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ტიპი"}),(0,a.jsx)("div",{className:"flex gap-2",children:["long","short"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>p({...h,type:e}),className:"flex-1 px-3 py-2 rounded-md border text-sm font-medium transition-colors ".concat(h.type===e?"bg-primary text-primary-foreground border-primary":"border-input hover:bg-muted"),children:"long"===e?"Long":"Short"},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"თეგები"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:h.tags.map(e=>(0,a.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>j(e),children:(0,a.jsx)(d.lhV,{className:"w-3 h-3"})})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.I,{value:g,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),v(g)),placeholder:"თეგის დამატება...",className:"flex-1"}),(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>v(g),children:(0,a.jsx)(d.rIf,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:u.filter(e=>!h.tags.includes(e)).slice(0,5).map(e=>(0,a.jsxs)(i.C,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>v(e),children:["+ ",e]},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"სტატუსი"}),(0,a.jsxs)("select",{value:h.status,onChange:e=>p({...h,status:e.target.value}),className:"w-full px-3 py-2 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"published",children:"გამოქვეყნებული"}),(0,a.jsx)("option",{value:"draft",children:"დრაფტი"}),(0,a.jsx)("option",{value:"scheduled",children:"დაგეგმილი"})]})]}),"scheduled"===h.status&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"გამოქვეყნების თარიღი"}),(0,a.jsx)(n.I,{type:"datetime-local",value:h.scheduledAt,onChange:e=>p({...h,scheduledAt:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:m,children:"გაუქმება"}),(0,a.jsxs)(r.z,{type:"submit",children:[(0,a.jsx)(d.yRg,{className:"w-4 h-4 mr-2"}),"შენახვა"]})]})]})})]})})}},79055:function(e,s,t){"use strict";t.d(s,{C:function(){return c}});var a=t(57437);t(2265);var l=t(71538),r=t(13027),n=t(49354);let i=(0,r.j)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,asChild:r=!1,...c}=e,d=r?l.g7:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:t}),s),...c})}},89733:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(57437);t(2265);var l=t(71538),r=t(13027),n=t(49354);let i=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t="default",size:r="default",asChild:c=!1,...d}=e,o=c?l.g7:"button";return(0,a.jsx)(o,{"data-slot":"button","data-variant":t,"data-size":r,className:(0,n.cn)(i({variant:t,size:r,className:s})),...d})}},48185:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return c},Zb:function(){return r},aY:function(){return d},eW:function(){return o},ll:function(){return i}});var a=t(57437);t(2265);var l=t(49354);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col rounded-xl border shadow-sm overflow-hidden",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6 pb-6",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,l.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},77209:function(e,s,t){"use strict";t.d(s,{I:function(){return r}});var a=t(57437);t(2265);var l=t(49354);function r(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}},49354:function(e,s,t){"use strict";t.d(s,{cn:function(){return r}});var a=t(44839),l=t(96164);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,a.W)(s))}},1584:function(e,s,t){"use strict";t.d(s,{F:function(){return r},e:function(){return n}});var a=t(2265);function l(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}function r(...e){return s=>{let t=!1,a=e.map(e=>{let a=l(e,s);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let s=0;s<a.length;s++){let t=a[s];"function"==typeof t?t():l(e[s],null)}}}}function n(...e){return a.useCallback(r(...e),e)}},71538:function(e,s,t){"use strict";t.d(s,{g7:function(){return o}});var a,l=t(2265),r=t(1584),n=t(57437),i=Symbol.for("react.lazy"),c=(a||(a=t.t(l,2)))[" use ".trim().toString()];function d(e){var s;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(s=e._payload)&&null!==s&&"then"in s}var o=function(e){let s=function(e){let s=l.forwardRef((e,s)=>{let{children:t,...a}=e;if(d(t)&&"function"==typeof c&&(t=c(t._payload)),l.isValidElement(t)){var n;let e,i;let c=(n=t,(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref),d=function(e,s){let t={...s};for(let a in s){let l=e[a],r=s[a];/^on[A-Z]/.test(a)?l&&r?t[a]=(...e)=>{let s=r(...e);return l(...e),s}:l&&(t[a]=l):"style"===a?t[a]={...l,...r}:"className"===a&&(t[a]=[l,r].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==l.Fragment&&(d.ref=s?(0,r.F)(s,c):c),l.cloneElement(t,d)}return l.Children.count(t)>1?l.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}(e),t=l.forwardRef((e,t)=>{let{children:a,...r}=e;d(a)&&"function"==typeof c&&(a=c(a._payload));let i=l.Children.toArray(a),o=i.find(m);if(o){let e=o.props.children,a=i.map(s=>s!==o?s:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,n.jsx)(s,{...r,ref:t,children:l.isValidElement(e)?l.cloneElement(e,void 0,a):null})}return(0,n.jsx)(s,{...r,ref:t,children:a})});return t.displayName=`${e}.Slot`,t}("Slot"),u=Symbol("radix.slottable");function m(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}},13027:function(e,s,t){"use strict";t.d(s,{j:function(){return n}});var a=t(44839);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=a.W,n=(e,s)=>t=>{var a;if((null==s?void 0:s.variants)==null)return r(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:i}=s,c=Object.keys(n).map(e=>{let s=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===s)return null;let r=l(s)||l(a);return n[e][r]}),d=t&&Object.entries(t).reduce((e,s)=>{let[t,a]=s;return void 0===a||(e[t]=a),e},{});return r(e,c,null==s?void 0:null===(a=s.compoundVariants)||void 0===a?void 0:a.reduce((e,s)=>{let{class:t,className:a,...l}=s;return Object.entries(l).every(e=>{let[s,t]=e;return Array.isArray(t)?t.includes({...i,...d}[s]):({...i,...d})[s]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[6950,8534,2971,7023,1744],function(){return e(e.s=53022)}),_N_E=e.O()}]);