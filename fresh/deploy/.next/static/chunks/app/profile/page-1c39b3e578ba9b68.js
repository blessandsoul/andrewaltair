(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{31378:function(e,s,r){Promise.resolve().then(r.bind(r,1281))},1281:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return U}});var a=r(57437),t=r(2265),l=r(8889),i=r(16463),n=r(71471),c=r(87138),o=r(72655),d=r(89733),m=r(48185),u=r(49354);function x(e){let{onAvatarChange:s,onCoverChange:r,onLogout:l}=e,{user:i,isGod:x,isAdmin:h,logout:f}=(0,n.a)(),p=t.useRef(null),b=t.useRef(null),g=t.useRef(null),[v,j]=t.useState(null==i?void 0:i.avatar),[N,w]=t.useState(null),[y,k]=t.useState(!1),[S,C]=t.useState(50),[P,z]=t.useState(50),_=t.useRef(!1),D=t.useRef(0),A=t.useRef(50);if(t.useEffect(()=>{j(null==i?void 0:i.avatar)},[null==i?void 0:i.avatar]),t.useEffect(()=>{(null==i?void 0:i.coverImage)&&w(i.coverImage),(null==i?void 0:i.coverOffsetY)!==void 0&&C(i.coverOffsetY)},[null==i?void 0:i.coverImage,null==i?void 0:i.coverOffsetY]),!i)return null;let E=n.m[i.role],I=async e=>{let s=void 0!==e?e:S;k(!1),_.current=!1;try{let e=localStorage.getItem("auth_token");if(!e)return;await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({coverOffsetY:s})})}catch(e){console.error("Failed to save cover position",e)}};return t.useEffect(()=>{let e=e=>{if(!_.current||!y||!g.current)return;let s=e.clientY-D.current,r=g.current.offsetHeight;C(Math.min(100,Math.max(0,A.current-s/r*100)))},s=()=>{_.current&&(_.current=!1,z(S))};return y&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",s)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",s)}},[y,S]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:g,className:(0,u.cn)("relative h-48 md:h-64 bg-gradient-to-r from-primary via-accent to-primary overflow-hidden select-none",y&&"cursor-move"),onMouseDown:e=>{y&&(e.preventDefault(),e.stopPropagation(),_.current=!0,D.current=e.clientY,A.current=S)},children:[N?(0,a.jsx)("img",{src:N,alt:"Cover",className:"w-full h-full object-cover transition-none",style:{objectPosition:"center ".concat(S,"%")}}):(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary via-accent to-primary opacity-80"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.z,{onClick:()=>I(),variant:"default",size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(o.e6w,{className:"w-4 h-4"}),"შენახვა"]}),(0,a.jsxs)(d.z,{onClick:()=>{k(!1),C(P),_.current=!1},variant:"destructive",size:"sm",className:"gap-2",children:[(0,a.jsx)(o.lhV,{className:"w-4 h-4"}),"გაუქმება"]})]}):(0,a.jsxs)(a.Fragment,{children:[N&&(0,a.jsxs)("button",{onClick:()=>{k(!0),z(S)},className:"flex items-center gap-2 px-4 py-2 bg-black/50 hover:bg-black/70 text-white rounded-lg backdrop-blur-sm transition-colors text-sm font-medium",children:[(0,a.jsx)(o.XVF,{className:"w-4 h-4"}),"პოზიცია"]}),(0,a.jsxs)("button",{onClick:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2 bg-black/50 hover:bg-black/70 text-white rounded-lg backdrop-blur-sm transition-colors text-sm font-medium",children:[(0,a.jsx)(o.rlt,{className:"w-4 h-4"}),"ფონის შეცვლა"]})]})}),(0,a.jsx)("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&r&&r(a,e=>{w(e),C(50),I(50)})}})]}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 relative z-10 -mt-16",children:(0,a.jsx)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm mb-6",children:(0,a.jsx)(m.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-primary to-accent p-1 shadow-xl",children:(0,a.jsx)("div",{className:"w-full h-full rounded-full bg-background flex items-center justify-center overflow-hidden",children:v?(0,a.jsx)("img",{src:v,alt:i.fullName,className:"w-full h-full object-cover"}):(0,a.jsx)(o.S8z,{className:"w-16 h-16 text-muted-foreground"})})}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"absolute bottom-0 right-0 w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"ავატარის ატვირთვა",children:(0,a.jsx)(o.rlt,{className:"w-5 h-5"})}),(0,a.jsx)("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];a&&s&&s(a,e=>{j(e)})}}),x&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 text-3xl animate-bounce","aria-label":"ღმერთი",children:"\uD83D\uDC51"})]}),(0,a.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:i.fullName}),(0,a.jsxs)("p",{className:"text-muted-foreground mb-3",children:["@",i.username]}),(0,a.jsxs)("div",{className:(0,u.cn)("inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r text-white text-sm font-medium",E.color),children:[(0,a.jsx)("span",{children:E.icon}),(0,a.jsx)("span",{children:E.label})]}),i.badge&&(0,a.jsx)("div",{className:"mt-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-yellow-500/10 border border-yellow-500/30 text-yellow-500 text-sm ml-2",children:i.badge})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(x||h)&&(0,a.jsx)(d.z,{asChild:!0,variant:"outline",className:"gap-2",children:(0,a.jsxs)(c.default,{href:"/admin",children:[(0,a.jsx)(o.$T2,{className:"w-4 h-4"}),"ადმინ პანელი"]})}),(0,a.jsxs)(d.z,{variant:"outline",className:"gap-2",onClick:()=>{f(),null==l||l()},children:[(0,a.jsx)(o.VUx,{className:"w-4 h-4"}),"გასვლა"]})]})]})})})})]})}var h=r(97732);let f=["profile","activity","stats","social","privacy","media","subscriptions","security","preferences"],p=[{id:"profile",label:"პროფილი",icon:o.S8z},{id:"activity",label:"აქტივობა",icon:o.PaG},{id:"stats",label:"სტატისტიკა",icon:o.hWk},{id:"social",label:"სოც. ქსელები",icon:o.Ma9},{id:"privacy",label:"კონფიდენციალურობა",icon:o.HLl},{id:"media",label:"მედია",icon:o.msJ},{id:"subscriptions",label:"გამოწერები",icon:o.UvU},{id:"security",label:"უსაფრთხოება",icon:o.$T2},{id:"preferences",label:"პარამეტრები",icon:o.sDK}];function b(e){let{children:s}=e,[r,t]=(0,h.v1)("tab",(0,h.km)(f).withDefault("profile"));return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",role:"tablist",children:p.map(e=>(0,a.jsxs)("button",{role:"tab","aria-selected":r===e.id,"aria-controls":"tabpanel-".concat(e.id),onClick:()=>t(e.id),className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r===e.id?"bg-primary text-white shadow-lg":"bg-card border border-border hover:bg-accent/10 hover:border-primary/30"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),(0,a.jsx)("div",{id:"tabpanel-".concat(r),role:"tabpanel","aria-labelledby":"tab-".concat(r),children:s})]})}var g=r(77209),v=r(83472);let j=v.Ryn({fullName:v.Z_8().min(2,"სრული სახელი უნდა შეიცავდეს მინიმუმ 2 სიმბოლოს").max(100,"სრული სახელი ძალიან გრძელია"),email:v.Z_8().email("არასწორი ელ. ფოსტის ფორმატი"),username:v.Z_8().min(3,"მომხმარებლის სახელი უნდა შეიცავდეს მინიმუმ 3 სიმბოლოს").max(30,"მომხმარებლის სახელი ძალიან გრძელია").regex(/^[a-zA-Z0-9_]+$/,"დასაშვებია მხოლოდ ასოები, ციფრები და ქვედა ხაზი"),bio:v.Z_8().max(500,"ბიო ძალიან გრძელია").optional()}),N=v.Ryn({currentPassword:v.Z_8().min(1,"შეიყვანეთ მიმდინარე პაროლი"),newPassword:v.Z_8().min(8,"პაროლი უნდა შეიცავდეს მინიმუმ 8 სიმბოლოს").regex(/[A-Z]/,"პაროლი უნდა შეიცავდეს დიდ ასოს").regex(/[a-z]/,"პაროლი უნდა შეიცავდეს პატარა ასოს").regex(/[0-9]/,"პაროლი უნდა შეიცავდეს ციფრს"),confirmPassword:v.Z_8().min(1,"გაიმეორეთ პაროლი")}).refine(e=>e.newPassword===e.confirmPassword,{message:"პაროლები არ ემთხვევა",path:["confirmPassword"]});function w(){let{user:e}=(0,n.a)(),[s,r]=t.useState(!1),[l,i]=t.useState({fullName:(null==e?void 0:e.fullName)||"",email:(null==e?void 0:e.email)||"",username:(null==e?void 0:e.username)||"",bio:"AI ენთუზიასტი და ტექნოლოგიების მოყვარული \uD83D\uDE80"}),[c,u]=t.useState({});if(!e)return null;let x=()=>{i({fullName:e.fullName,email:e.email,username:e.username,bio:"AI ენთუზიასტი და ტექნოლოგიების მოყვარული \uD83D\uDE80"}),u({}),r(!1)};return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.S8z,{className:"w-5 h-5 text-primary"}),"პროფილის ინფორმაცია"]}),(0,a.jsx)(m.SZ,{children:"მართეთ თქვენი პირადი მონაცემები"})]}),(0,a.jsx)(d.z,{variant:s?"outline":"default",size:"sm",onClick:()=>s?x():r(!0),className:"gap-2",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.lhV,{className:"w-4 h-4"}),"გაუქმება"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.EMN,{className:"w-4 h-4"}),"რედაქტირება"]})})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(o.S8z,{className:"w-4 h-4 text-muted-foreground"}),"სრული სახელი"]}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)(g.I,{value:l.fullName,onChange:e=>i({...l,fullName:e.target.value})}),c.fullName&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:c.fullName})]}):(0,a.jsx)("p",{className:"px-3 py-2 bg-muted/50 rounded-md",children:e.fullName})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"@"}),"მომხმარებლის სახელი"]}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)(g.I,{value:l.username,onChange:e=>i({...l,username:e.target.value})}),c.username&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:c.username})]}):(0,a.jsx)("p",{className:"px-3 py-2 bg-muted/50 rounded-md",children:e.username})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(o.QOK,{className:"w-4 h-4 text-muted-foreground"}),"ელ. ფოსტა"]}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)(g.I,{type:"email",value:l.email,onChange:e=>i({...l,email:e.target.value})}),c.email&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:c.email})]}):(0,a.jsx)("p",{className:"px-3 py-2 bg-muted/50 rounded-md",children:e.email})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(o.RgR,{className:"w-4 h-4 text-muted-foreground"}),"რეგისტრაციის თარიღი"]}),(0,a.jsx)("p",{className:"px-3 py-2 bg-muted/50 rounded-md",children:new Date(e.createdAt).toLocaleDateString("ka-GE",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(o.RxU,{className:"w-4 h-4 text-muted-foreground"}),"ბიო"]}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)("textarea",{value:l.bio,onChange:e=>i({...l,bio:e.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md resize-none h-24 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",placeholder:"მოყევით თქვენ შესახებ..."}),c.bio&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:c.bio})]}):(0,a.jsx)("p",{className:"px-3 py-2 bg-muted/50 rounded-md",children:l.bio})]}),s&&(0,a.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,a.jsxs)(d.z,{onClick:()=>{let e=j.safeParse(l);if(!e.success){let s={};e.error.issues.forEach(e=>{e.path[0]&&(s[e.path[0]]=e.message)}),u(s);return}u({}),r(!1)},className:"gap-2",children:[(0,a.jsx)(o.yRg,{className:"w-4 h-4"}),"შენახვა"]})})]})]})}v.Ryn({profileVisible:v.O72(),showEmail:v.O72(),showActivity:v.O72(),showSubscriptions:v.O72(),allowMessages:v.O72()});let y={login:{icon:o.S8z,color:"text-green-500"},profile_update:{icon:o.EMN,color:"text-blue-500"},comment:{icon:o.Rwq,color:"text-purple-500"},like:{icon:o.KdP,color:"text-red-500"},view:{icon:o.f7Q,color:"text-gray-500"},subscription:{icon:o.CMq,color:"text-yellow-500"},password_change:{icon:o.A2B,color:"text-orange-500"}};function k(e){let{activity:s,className:r}=e,t=y[s.type]||y.login,l=t.icon;return(0,a.jsxs)("div",{className:(0,u.cn)("flex items-center gap-4 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",r),children:[(0,a.jsx)("div",{className:(0,u.cn)("w-10 h-10 rounded-full bg-background border border-border flex items-center justify-center",t.color),children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:s.description}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s.time})]})]})}function S(){return(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/30 animate-pulse",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-muted"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-3/4 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-3 w-1/4 bg-muted rounded"})]})]},s))})}function C(){return(0,a.jsxs)("div",{className:"space-y-6 animate-pulse",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-muted-foreground/20 rounded mb-2"}),(0,a.jsx)("div",{className:"h-7 w-16 bg-muted-foreground/20 rounded mb-1"}),(0,a.jsx)("div",{className:"h-4 w-24 bg-muted-foreground/20 rounded"})]},s))}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsx)("div",{className:"h-5 w-32 bg-muted rounded mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"h-4 w-24 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-4 w-16 bg-muted rounded"})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full w-full"})]},s))})]})]})}function P(e){let{activity:s=[],isLoading:r=!1}=e;return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.PaG,{className:"w-5 h-5 text-primary"}),"აქტივობის ისტორია"]}),(0,a.jsx)(m.SZ,{children:"თქვენი ბოლო მოქმედებები პლატფორმაზე"})]}),(0,a.jsx)(m.aY,{children:r?(0,a.jsx)(S,{}):0===s.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"აქტივობა არ არის"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsx)(k,{activity:e},e.id))}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)(d.z,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(o.PaG,{className:"w-4 h-4"}),"მეტის ნახვა"]})})]})})]})}let z={blue:"from-blue-500/10 to-blue-500/5 border-blue-500/20 text-blue-500",green:"from-green-500/10 to-green-500/5 border-green-500/20 text-green-500",purple:"from-purple-500/10 to-purple-500/5 border-purple-500/20 text-purple-500",red:"from-red-500/10 to-red-500/5 border-red-500/20 text-red-500",yellow:"from-yellow-500/10 to-yellow-500/5 border-yellow-500/20 text-yellow-500"};function _(e){let{icon:s,value:r,label:t,color:l,className:i}=e;return(0,a.jsxs)("div",{className:(0,u.cn)("p-4 rounded-lg bg-gradient-to-br border",z[l],i),children:[(0,a.jsx)(s,{className:"w-6 h-6 mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground",children:r}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t})]})}function D(e){let{stats:s,isLoading:r=!1}=e;return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.hWk,{className:"w-5 h-5 text-primary"}),"სტატისტიკა"]}),(0,a.jsx)(m.SZ,{children:"თქვენი გამოყენების სტატისტიკა"})]}),(0,a.jsx)(m.aY,{className:"space-y-6",children:r?(0,a.jsx)(C,{}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(_,{icon:o.rfE,value:s.totalTimeSpent,label:"ჯამური დრო",color:"blue"}),(0,a.jsx)(_,{icon:o.lEz,value:s.sessionsCount,label:"სესიები",color:"green"}),(0,a.jsx)(_,{icon:o.rAI,value:s.toolsUsed,label:"ინსტრუმენტი",color:"purple"}),(0,a.jsx)(_,{icon:o.KdP,value:s.likesGiven,label:"მოწონება",color:"red"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.ehl,{className:"w-4 h-4"}),"ტოპ სექციები"]}),(0,a.jsx)("div",{className:"space-y-3",children:s.topSections.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[e.visits," ნახვა"]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-accent rounded-full transition-all",style:{width:"".concat(e.percentage||0,"%")}})})]},e.name))})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"ბოლო აქტივობა"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s.lastActive})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"font-medium mb-3",children:"ნანახი გვერდები"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-primary",children:s.pagesVisited})]})]})]}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"სტატისტიკა არ არის"})})]})}let A={google:{icon:o.vvP,color:"bg-red-500"},github:{icon:o.VnC,color:"bg-gray-800"},facebook:{icon:o.zez,color:"bg-blue-600"},telegram:{icon:o.Oe$,color:"bg-sky-500"}};function E(e){let{provider:s,name:r,connected:t,onConnect:l,onDisconnect:i,className:n}=e,c=A[s],m=c.icon;return(0,a.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between p-4 rounded-lg border border-border hover:border-primary/50 transition-colors",n),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,u.cn)("w-12 h-12 rounded-xl flex items-center justify-center text-white",c.color),children:(0,a.jsx)(m,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:r}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t?"დაკავშირებულია":"არ არის დაკავშირებული"})]})]}),t?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-500 text-sm",children:[(0,a.jsx)(o.XDv,{className:"w-4 h-4"}),"დაკავშირებულია"]}),(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:i,children:"გათიშვა"})]}):(0,a.jsxs)(d.z,{variant:"outline",size:"sm",className:"gap-2",onClick:l,children:[(0,a.jsx)(o.F3l,{className:"w-4 h-4"}),"დაკავშირება"]})]})}let I=[{id:"google",name:"Google"},{id:"github",name:"GitHub"},{id:"facebook",name:"Facebook"},{id:"telegram",name:"Telegram"}];function O(e){let{socialAccounts:s=[]}=e,[r,l]=t.useState(s),i=e=>{},n=e=>{l(s=>s.map(s=>s.id===e?{...s,connected:!1}:s))};return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.F3l,{className:"w-5 h-5 text-primary"}),"დაკავშირებული ანგარიშები"]}),(0,a.jsx)(m.SZ,{children:"მართეთ სოციალური ქსელების კავშირები"})]}),(0,a.jsx)(m.aY,{className:"space-y-4",children:I.map(e=>{let s=r.find(s=>s.id===e.id),t=(null==s?void 0:s.connected)||!1;return(0,a.jsx)(E,{provider:e.id,name:e.name,connected:t,onConnect:()=>i(e.id),onDisconnect:()=>n(e.id)},e.id)})})]})}function Z(e){let{label:s,description:r,checked:t,onCheckedChange:l,disabled:i=!1,className:n}=e;return(0,a.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between p-4 rounded-lg border border-border",i&&"opacity-50 cursor-not-allowed",n),children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:s}),r&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:r})]}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":t,disabled:i,onClick:()=>!i&&l(!t),className:(0,u.cn)("relative w-12 h-6 rounded-full transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",t?"bg-primary":"bg-muted",i&&"pointer-events-none"),children:(0,a.jsx)("span",{className:(0,u.cn)("absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm",t?"right-1":"left-1")})})]})}function R(){let{user:e}=(0,n.a)(),[s,r]=t.useState({profileVisible:!0,showEmail:!1,showActivity:!0,showSubscriptions:!0,allowMessages:!0}),l=e=>{r(s=>({...s,[e]:!s[e]}))};return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.HLl,{className:"w-5 h-5 text-primary"}),"პროფილის ხილვადობა"]}),(0,a.jsx)(m.SZ,{children:"მართეთ ვინ ხედავს თქვენს ინფორმაციას"})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-4 rounded-lg border border-border",children:(0,a.jsx)(Z,{label:"საჯარო პროფილი",description:"სხვა მომხმარებლებს შეუძლიათ თქვენი პროფილის ნახვა",checked:s.profileVisible,onCheckedChange:()=>l("profileVisible"),className:"border-0 p-0"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(Z,{label:"ელ. ფოსტის ჩვენება",description:"აჩვენეთ თქვენი ელ. ფოსტა პროფილზე",checked:s.showEmail,onCheckedChange:()=>l("showEmail")}),(0,a.jsx)(Z,{label:"აქტივობის ჩვენება",description:"სხვებმა დაინახონ თქვენი აქტივობა",checked:s.showActivity,onCheckedChange:()=>l("showActivity")}),(0,a.jsx)(Z,{label:"გამოწერების ჩვენება",description:"აჩვენეთ თქვენი გამოწერები",checked:s.showSubscriptions,onCheckedChange:()=>l("showSubscriptions")}),(0,a.jsx)(Z,{label:"პირადი შეტყობინებები",description:"მიიღეთ შეტყობინებები სხვა მომხმარებლებისგან",checked:s.allowMessages,onCheckedChange:()=>l("allowMessages")})]}),s.profileVisible&&e&&(0,a.jsx)("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:(0,a.jsxs)("p",{className:"text-sm text-primary flex items-center gap-2",children:[(0,a.jsx)(o.f7Q,{className:"w-4 h-4"}),"თქვენი პროფილი ხელმისაწვდომია: altair.ge/@",e.username]})})]})]})}function F(){let{user:e}=(0,n.a)(),s=t.useRef(null),r=t.useRef(null),[l,i]=t.useState(null);return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.msJ,{className:"w-5 h-5 text-primary"}),"მედია პარამეტრები"]}),(0,a.jsx)(m.SZ,{children:"მართეთ თქვენი ავატარი და ფონი"})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.S8z,{className:"w-4 h-4"}),"ავატარი"]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent p-1",children:(0,a.jsx)("div",{className:"w-full h-full rounded-full bg-background flex items-center justify-center overflow-hidden",children:(null==e?void 0:e.avatar)?(0,a.jsx)("img",{src:e.avatar,alt:e.fullName,className:"w-full h-full object-cover"}):(0,a.jsx)(o.S8z,{className:"w-12 h-12 text-muted-foreground"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d.z,{onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},className:"gap-2",children:[(0,a.jsx)(o.S7F,{className:"w-4 h-4"}),"ატვირთვა"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"რეკომენდებული: 400x400px, JPG ან PNG"})]}),(0,a.jsx)("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;null===(s=e.target.files)||void 0===s||s[0]}})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.msJ,{className:"w-4 h-4"}),"ფონის სურათი"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-[3/1] rounded-lg overflow-hidden bg-gradient-to-r from-primary via-accent to-primary",children:l?(0,a.jsx)("img",{src:l,alt:"Cover",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:(0,a.jsx)(o.msJ,{className:"w-12 h-12"})})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.z,{onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},className:"gap-2",children:[(0,a.jsx)(o.S7F,{className:"w-4 h-4"}),"ატვირთვა"]}),l&&(0,a.jsxs)(d.z,{variant:"outline",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>i(null),children:[(0,a.jsx)(o.EF5,{className:"w-4 h-4"}),"წაშლა"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"რეკომენდებული: 1500x500px, JPG ან PNG"}),(0,a.jsx)("input",{ref:r,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r){let e=new FileReader;e.onloadend=()=>i(e.result),e.readAsDataURL(r)}}})]})]})]})]})}let T={ChatGPT:o.bAs,Midjourney:o.msJ,"DALL-E 3":o.msJ,"AI News":o.RxU,Tutorials:o.mL_,Claude:o.GJJ,"Stable Diffusion":o.lbY,Gemini:o.GJJ,"Product Updates":o.ehl};function J(e){let{name:s,type:r,subscribed:t,onToggle:l,className:i}=e,n=T[s]||("tool"===r?o.bAs:o.RxU);return(0,a.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between p-4 rounded-lg border transition-colors",t?"border-primary bg-primary/5":"border-border",i),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,u.cn)("w-10 h-10 rounded-lg flex items-center justify-center",t?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:(0,a.jsx)(n,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"font-medium",children:s})]}),(0,a.jsx)("button",{onClick:l,className:(0,u.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors",t?"bg-primary text-white hover:bg-primary/90":"bg-muted hover:bg-muted/80"),children:t?"გამოწერილია":"გამოწერა"})]})}function Y(e){let{subscriptions:s=[],isLoading:r=!1}=e,[l,i]=t.useState(s),n=e=>{i(s=>s.map(s=>s.id===e?{...s,subscribed:!s.subscribed}:s))},c=l.filter(e=>"tool"===e.type),d=l.filter(e=>"topic"===e.type);return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.UvU,{className:"w-5 h-5 text-primary"}),"გამოწერები"]}),(0,a.jsx)(m.SZ,{children:"მართეთ თქვენი გამოწერები"})]}),(0,a.jsx)(m.aY,{className:"space-y-6",children:r?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"იტვირთება..."}):0===l.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"გამოწერები არ არის"}):(0,a.jsxs)(a.Fragment,{children:[c.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.rAI,{className:"w-4 h-4"}),"ინსტრუმენტები"]}),(0,a.jsx)("div",{className:"grid gap-3",children:c.map(e=>(0,a.jsx)(J,{name:e.name,type:e.type,subscribed:e.subscribed,onToggle:()=>n(e.id)},e.id))})]}),d.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.RxU,{className:"w-4 h-4"}),"თემები"]}),(0,a.jsx)("div",{className:"grid gap-3",children:d.map(e=>(0,a.jsx)(J,{name:e.name,type:e.type,subscribed:e.subscribed,onToggle:()=>n(e.id)},e.id))})]}),(0,a.jsx)("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-primary",children:l.filter(e=>e.subscribed).length}),(0,a.jsx)("span",{className:"text-muted-foreground",children:" აქტიური გამოწერა"})]})})]})})]})}function L(){let[e,s]=t.useState(!1),[r,l]=t.useState(!1),[i,n]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=t.useState({});return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.$T2,{className:"w-5 h-5 text-primary"}),"უსაფრთხოება"]}),(0,a.jsx)(m.SZ,{children:"მართეთ თქვენი პაროლი და უსაფრთხოების პარამეტრები"})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.A2B,{className:"w-4 h-4"}),"პაროლის შეცვლა"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"მიმდინარე პაროლი"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.I,{type:e?"text":"password",placeholder:"••••••••",value:i.currentPassword,onChange:e=>n({...i,currentPassword:e.target.value}),className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>s(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e?(0,a.jsx)(o.wQf,{className:"w-4 h-4"}):(0,a.jsx)(o.f7Q,{className:"w-4 h-4"})})]}),c.currentPassword&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:c.currentPassword})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"ახალი პაროლი"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.I,{type:r?"text":"password",placeholder:"••••••••",value:i.newPassword,onChange:e=>n({...i,newPassword:e.target.value}),className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>l(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:r?(0,a.jsx)(o.wQf,{className:"w-4 h-4"}):(0,a.jsx)(o.f7Q,{className:"w-4 h-4"})})]}),c.newPassword&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:c.newPassword})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"დაადასტურეთ პაროლი"}),(0,a.jsx)(g.I,{type:"password",placeholder:"••••••••",value:i.confirmPassword,onChange:e=>n({...i,confirmPassword:e.target.value})}),c.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:c.confirmPassword})]}),(0,a.jsxs)(d.z,{onClick:()=>{let e=N.safeParse(i);if(!e.success){let s={};e.error.issues.forEach(e=>{e.path[0]&&(s[e.path[0]]=e.message)}),u(s);return}u({}),n({currentPassword:"",newPassword:"",confirmPassword:""})},className:"gap-2",children:[(0,a.jsx)(o.A2B,{className:"w-4 h-4"}),"პაროლის შეცვლა"]})]})]}),(0,a.jsx)("div",{className:"p-4 rounded-lg border border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium flex items-center gap-2",children:[(0,a.jsx)(o.$T2,{className:"w-4 h-4"}),"ორფაქტორიანი ავთენტიფიკაცია"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"დაიცავით თქვენი ანგარიში დამატებითი დაცვით"})]}),(0,a.jsx)(d.z,{variant:"outline",children:"ჩართვა"})]})}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"font-medium mb-4",children:"აქტიური სესიები"}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:"Windows • TbBrandChrome"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"თბილისი, საქართველო • ახლა"})]})]}),(0,a.jsx)("span",{className:"text-xs text-green-500 font-medium",children:"მიმდინარე"})]})})]})]})]})}function M(){let[e,s]=t.useState({email:!0,push:!0,marketing:!1}),[r,l]=t.useState("dark"),[i,n]=t.useState("ka");return(0,a.jsxs)(m.Zb,{className:"border-border/50 shadow-xl backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.sDK,{className:"w-5 h-5 text-primary"}),"პარამეტრები"]}),(0,a.jsx)(m.SZ,{children:"მორგეთ თქვენი გამოცდილება"})]}),(0,a.jsxs)(m.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.CMq,{className:"w-4 h-4"}),"შეტყობინებები"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(Z,{label:"ელ. ფოსტის შეტყობინებები",description:"მიიღეთ განახლებები ელ. ფოსტით",checked:e.email,onCheckedChange:r=>s({...e,email:r}),className:"border-0 p-0"}),(0,a.jsx)(Z,{label:"Push შეტყობინებები",description:"მიიღეთ მყისიერი შეტყობინებები",checked:e.push,onCheckedChange:r=>s({...e,push:r}),className:"border-0 p-0"}),(0,a.jsx)(Z,{label:"მარკეტინგული წერილები",description:"მიიღეთ ინფორმაცია ახალი ფუნქციების შესახებ",checked:e.marketing,onCheckedChange:r=>s({...e,marketing:r}),className:"border-0 p-0"})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.YIG,{className:"w-4 h-4"}),"გარეგნობა"]}),(0,a.jsx)("div",{className:"flex gap-3",children:["dark","light","system"].map(e=>(0,a.jsx)("button",{onClick:()=>l(e),className:(0,u.cn)("flex-1 px-4 py-2 rounded-lg border transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",r===e?"border-primary bg-primary/10 font-medium":"border-border hover:border-primary/50"),children:"dark"===e?"მუქი":"light"===e?"ღია":"სისტემური"},e))})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-border",children:[(0,a.jsxs)("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.FQi,{className:"w-4 h-4"}),"ენა"]}),(0,a.jsxs)("select",{value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-border bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[(0,a.jsx)("option",{value:"ka",children:"ქართული"}),(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"ru",children:"Русский"})]})]})]})]})}function G(){let e=(0,i.useRouter)(),{user:s,isLoading:r}=(0,n.a)(),l=function(){let[e]=(0,h.v1)("tab",(0,h.km)(f).withDefault("profile"));return e}(),[c,o]=t.useState([]),[d,m]=t.useState(null),[u,p]=t.useState([]),[g,v]=t.useState([]),[j,N]=t.useState(!0);t.useEffect(()=>{r||s||e.push("/login")},[s,r,e]),t.useEffect(()=>{(async function(){if(s)try{let e=localStorage.getItem("auth_token");if(!e){N(!1);return}let s=await fetch("/api/profile",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();if(e.activity&&o(e.activity.map((e,s)=>({id:e.id||"activity-".concat(s),type:e.type||"login",description:e.description,time:function(e){try{let s=new Date(e),r=new Date().getTime()-s.getTime(),a=Math.floor(r/6e4),t=Math.floor(r/36e5),l=Math.floor(r/864e5);if(a<60)return"".concat(a," წთ წინ");if(t<24)return"".concat(t," სთ წინ");if(0===l)return"დღეს";if(1===l)return"გუშინ";if(l<7)return"".concat(l," დღის წინ");if(l<30)return"".concat(Math.floor(l/7)," კვირის წინ");return s.toLocaleDateString("ka-GE")}catch(s){return e}}(e.time),timestamp:new Date(e.time)}))),e.stats){let s=e.stats.topSections||[],r=s.reduce((e,s)=>e+s.visits,0)||1;m({...e.stats,topSections:s.map(e=>({...e,percentage:Math.round(e.visits/r*100)}))})}e.subscriptions&&p(e.subscriptions),e.socialAccounts&&v(e.socialAccounts)}}catch(e){console.error("Failed to fetch profile data:",e)}finally{N(!1)}})()},[s]);let y=async(e,s)=>{try{let r=new FileReader;r.readAsDataURL(e),r.onloadend=async()=>{let e=r.result;s(e);let a=localStorage.getItem("auth_token");a&&((await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({avatar:e})})).ok||console.error("Failed to upload avatar"))}}catch(e){console.error("Avatar upload error:",e)}},k=async(e,s)=>{try{let r=new FileReader;r.readAsDataURL(e),r.onloadend=async()=>{let e=r.result;s(e);let a=localStorage.getItem("auth_token");a&&((await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({coverImage:e})})).ok||console.error("Failed to upload cover"))}}catch(e){console.error("Cover upload error:",e)}};return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"})}):s?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl"})]}),(0,a.jsx)(x,{onAvatarChange:y,onCoverChange:k,onLogout:()=>{e.push("/")}}),(0,a.jsxs)(b,{children:["profile"===l&&(0,a.jsx)(w,{}),"activity"===l&&(0,a.jsx)(P,{activity:c,isLoading:j}),"stats"===l&&(0,a.jsx)(D,{stats:d,isLoading:j}),"social"===l&&(0,a.jsx)(O,{socialAccounts:g}),"privacy"===l&&(0,a.jsx)(R,{}),"media"===l&&(0,a.jsx)(F,{}),"subscriptions"===l&&(0,a.jsx)(Y,{subscriptions:u,isLoading:j}),"security"===l&&(0,a.jsx)(L,{}),"preferences"===l&&(0,a.jsx)(M,{})]}),(0,a.jsx)("div",{className:"h-12"})]}):null}function U(){return(0,a.jsx)(l.Y,{children:(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"})}),children:(0,a.jsx)(G,{})})})}},89733:function(e,s,r){"use strict";r.d(s,{z:function(){return c}});var a=r(57437);r(2265);var t=r(71538),l=r(13027),i=r(49354);let n=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:r="default",size:l="default",asChild:c=!1,...o}=e,d=c?t.g7:"button";return(0,a.jsx)(d,{"data-slot":"button","data-variant":r,"data-size":l,className:(0,i.cn)(n({variant:r,size:l,className:s})),...o})}},48185:function(e,s,r){"use strict";r.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return d},ll:function(){return n}});var a=r(57437);r(2265);var t=r(49354);function l(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col rounded-xl border shadow-sm overflow-hidden",s),...r})}function i(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...r})}function n(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",s),...r})}function c(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",s),...r})}function o(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6 pb-6",s),...r})}function d(e){let{className:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",s),...r})}},77209:function(e,s,r){"use strict";r.d(s,{I:function(){return l}});var a=r(57437);r(2265);var t=r(49354);function l(e){let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}},71471:function(e,s,r){"use strict";r.d(s,{AuthProvider:function(){return n},a:function(){return c},m:function(){return l}});var a=r(57437),t=r(2265);let l={god:{label:"ღმერთი",color:"from-yellow-500 to-orange-500",icon:"\uD83D\uDC51"},admin:{label:"ადმინი",color:"from-red-500 to-pink-500",icon:"\uD83D\uDEE1️"},editor:{label:"ედიტორი",color:"from-blue-500 to-cyan-500",icon:"✏️"},viewer:{label:"მნახველი",color:"from-gray-500 to-gray-600",icon:"\uD83D\uDC41️"}},i=t.createContext(void 0);function n(e){let{children:s}=e,[r,l]=t.useState(null),[n,c]=t.useState(null),[o,d]=t.useState(!0);t.useEffect(()=>{(async()=>{let e=localStorage.getItem("auth_token"),s=localStorage.getItem("auth_user");if(e&&s)try{let s=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let r=await s.json();l(r.user),c(e)}else localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}catch(r){try{l(JSON.parse(s)),c(e)}catch(e){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}}d(!1)})()},[]);let m=async(e,s)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),a=await r.json();if(!r.ok)return{success:!1,error:a.error||"შესვლა ვერ მოხერხდა"};return l(a.user),c(a.token),localStorage.setItem("auth_token",a.token),localStorage.setItem("auth_user",JSON.stringify(a.user)),{success:!0}}catch(e){return{success:!1,error:"სერვერთან დაკავშირება ვერ მოხერხდა"}}},u=async e=>{try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await s.json();if(!s.ok)return{success:!1,error:r.error||"რეგისტრაცია ვერ მოხერხდა"};return l(r.user),c(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),{success:!0}}catch(e){return{success:!1,error:"სერვერთან დაკავშირება ვერ მოხერხდა"}}},x=(null==r?void 0:r.role)==="god",h=(null==r?void 0:r.role)==="god"||(null==r?void 0:r.role)==="admin",f=(null==r?void 0:r.role)==="god"||(null==r?void 0:r.role)==="admin"||(null==r?void 0:r.role)==="editor";return(0,a.jsx)(i.Provider,{value:{user:r,isLoading:o,login:m,register:u,logout:()=>{l(null),c(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")},isGod:x,isAdmin:h,canEdit:f,token:n},children:s})}function c(){let e=t.useContext(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},49354:function(e,s,r){"use strict";r.d(s,{cn:function(){return l}});var a=r(44839),t=r(96164);function l(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.m6)((0,a.W)(s))}}},function(e){e.O(0,[6950,8534,231,3705,2971,7023,1744],function(){return e(e.s=31378)}),_N_E=e.O()}]);